<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>KakaoLink API 사용하여 카카오톡에서 메세지보내기</title>
    <meta name="description" content="">

    <link rel="stylesheet" href="/css/main.css">
    <link rel="canonical" href="/mobile/using-kakaolink-api.html">
    <link rel="meta" type="application/rdf+xml" title="FOAF" href="/assets/foaf.rdf" />

    

    
      <script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-8647285-2', 'auto');
ga('send', 'pageview');
</script>

    
</head>


  <body>
    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">saltfactory's blog</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
        viewBox="0 0 18 15" enable-background="new 0 0 18 15" xml:space="preserve">
        <path fill="#505050" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0
        h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
        <path fill="#505050" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484
        h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
        <path fill="#505050" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0
        c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
      </svg>
    </a>
    <div class="trigger">
      <a class="page-link" href="http://saltfactory.net">saltfactory.net</a>
      
      <a class="page-link" href="/about/">About</a>
      
      
      
      <a class="page-link" href="/guestbook/">Guestbook</a>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
    </div>

    </nav>
    <script>
(function() {
  var cx = '014516175331458470005:ze8dwrrwnac';
  var gcse = document.createElement('script');
  gcse.type = 'text/javascript';
  gcse.async = true;
  gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
  '//cse.google.com/cse.js?cx=' + cx;
  var s = document.getElementsByTagName('script')[0];
  s.parentNode.insertBefore(gcse, s);
})();
</script>
<gcse:search></gcse:search>

<!-- <form onsubmit="onSearch()" >
  <input type="text" id="my-google-search">
</form>

<script language="Javascript" type="text/javascript">
function onSearch()
{
  var query = document.getElementById("my-google-search").value;
  window.open("http://google.com/search?q=" + query
  + "%20site:" + "http://blog.saltfactory.net");
}
</script> -->

</div>

</header>



    <div class="page-content">
      <div class="wrapper">
        <div class="post">

  <header class="post-header">
    <h1 class="post-title">KakaoLink API 사용하여 카카오톡에서 메세지보내기</h1>
    <p class="post-meta">Feb 10, 2014</p>
  </header>

  <article class="post-content">
    <h2 id="서론">서론</h2>

<p>며칠전 카카오가 드디어 API를 공개했다. 카카오는 모바일 플랫폼에만 국한된 라이브러리만 공개했다. 개인적으로 RESTful을 지원하는 Open API를 만들어주길 바랬지만.. 그래도 페이스북에서 SDK를 공개하듯 카카오도 이젠 iOS, Android SDK를 공개해서 배포하면서 개발자들을 개발할 수 있는 리소스를 공개했다. 카카오 개발자 페이지에서 좀더 자세한 설명은 참고하길 바란다. 블로그에서 카카오 개발에 관한 자료를 연재하려고한다. 첫번째로 안드로이드 개발을 하기 위한 설정 방법을 소개한다. 카카오 개발자 페이지에서 안드로이드 SDK를 설명하는 내용은 eclipse 기반이다. 하지만 우리는 IntelliJ로 안드로이드를 개발하고 있기 때문에 안드로이드 SDK 사용하는 방법을 IntelliJ로 개발하는 방법을 소개한다.</p>

<!--more-->

<h3 id="카카오-개발자-등록">카카오 개발자 등록</h3>

<p>먼저 카카오 개발자 사이트에 개발자를 등록한다. <a href="https://developers.kakao.com/login">https://developers.kakao.com/login</a></p>

<h3 id="앱-등록">앱 등록</h3>

<p>개발자 등록이 끝나면 내 애플리케이션을 등록한다. <a href="https://developers.kakao.com/apps">https://developers.kakao.com/apps</a>
데모를 위해서 <strong>sf-kakao-demo</strong> 라는 이름으로 앱을 등록했다.</p>

<p><img src="http://cfile21.uf.tistory.com/image/22320B4452F84D0F08DB4A" alt=""></p>

<p>다음은 개발 플랫폼을 추가한다. 먼저 Android 앱을 개발하는 예제를 만들것이기 때문에 Android 플랫폼을 추가한다. 등록한 앱을 선택하면 &quot;설정&quot;이라는 메뉴를 선택하면 플랫품을 추가할 수 있다.</p>

<p><img src="http://cfile24.uf.tistory.com/image/2238374252F84DF22FAD09" alt=""></p>

<p><img src="http://cfile3.uf.tistory.com/image/21476D4752F84E3717B281" alt=""></p>

<p>Android 플랫폼을 추가하면 Android 개발할 때 사용하는 패키지명을 입력한다. 우리는 데모용 앱을 만들것이기 때문에 <code>net.saltfactory.tutorial.kakaodemo</code> 라는 패키지명을 사용했다.</p>

<p><img src="http://cfile2.uf.tistory.com/image/2360593D52F84E510C62F9" alt=""></p>

<p><img src="http://cfile1.uf.tistory.com/image/2412AC4F52F84FD71A720B" alt=""></p>

<p>패키지명을 입력하면 마켓 URL까지 자동으로 추가되어진다. 이젠 키 해시를 만들어서 추가를 한다. Android 키 해시를 만드는 방법은 다음과 같다. 터미널에서 다음 명령어를 입력한다. 명령어를 입력하면 키해시가 만들어지는데 이것을 &quot;키 해시&quot; 란에 입력한다.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">keytool -exportcert -alias androiddebugkey -keystore ~/.android/debug.keystore | openssl sha1 -binary | openssl base64
</code></pre></div>
<p><img src="http://cfile3.uf.tistory.com/image/2257F24A52F8511D2D7898" alt=""></p>

<p><img src="http://cfile1.uf.tistory.com/image/257A7A4A52F8522E2153FD" alt=""></p>

<h3 id="sdk-다운로드">SDK 다운로드</h3>

<p>이제 앱 등록은 모두 마쳤다. 개발에 필요한 SDK를 다운 받는다. <a href="https://developers.kakao.com/docs/sdk">https://developers.kakao.com/docs/sdk</a> 에서 안드로이드 SDK를 다운받는다.</p>

<p><img src="http://cfile28.uf.tistory.com/image/266BC35052F852F4058787" alt=""></p>

<p><img src="http://cfile1.uf.tistory.com/image/2432013552F853A3122D0E" alt=""></p>

<p>다운 받은 zip 파일을 unzip 한다. 다운 받은 sdk 디렉토리 안에는 sdk, samples 그리고 templates 디렉토리가 존재한다.</p>

<p><img src="http://cfile2.uf.tistory.com/image/24208E4A52F8542719B530" alt=""></p>

<h3 id="안드로이드-프로젝트-생성">안드로이드 프로젝트 생성</h3>

<p>이젠 안드로이드 앱을 개발하기 위해서 안드로이드 프로젝트를 생성한다. <strong>sf-kakao-demo</strong>라는 이름으로 안드로이드 앱 프로젝트를 생성한다.
패키지 이름은 카카오 개발자 사이트에 안드로이드 앱을 등록한 패키지명을 입력한다. 우리는 <code>net.saltfactory.tutorial.kakaodemo</code>라고 지정했기 때문에 패키지를 <code>net.saltfactory.tutorial.kakaodemo</code>로 입력했다.</p>

<p><img src="http://cfile27.uf.tistory.com/image/242B1F4252F8878B386026" alt=""></p>

<p>이렇게 입력한 후 Finish를 선택하면 비어있는 기본적인 안드로이드 프로젝트가 완성된다.</p>

<p><img src="http://cfile21.uf.tistory.com/image/235B3D3552F887D30F8747" alt=""></p>

<p>이젠 다운 받은 SDK 를 import 한다. IntelliJ에서 File &gt; import Module을 선택한다.</p>

<p><img src="http://cfile10.uf.tistory.com/image/2578594652F887F928C55A" alt=""></p>

<p>import Module을 선택하면 import할 파일을 찾는 탐색기가 열리는데 이때 앞에서 다운받은 SDK 디렉토리 밑에 kakao-android-sdk-1.0.10 프로젝트를 선택한다.</p>

<p><img src="http://cfile1.uf.tistory.com/image/2250A13652F8566512CCE9" alt=""></p>

<p>import할 모듈을 선택하면 Create module from existing sources를 선택한다.</p>

<p><img src="http://cfile23.uf.tistory.com/image/2510594152F856CB3A3875" alt=""></p>

<p>그러면 관련된 모듈이 모두 체크된 것을 확인할 수 있다. 모든 모듈을 한번에 import할 수 있게 모두 체크한다.</p>

<p><img src="http://cfile23.uf.tistory.com/image/2519AF4D52F857040D0A0F" alt=""></p>

<p>관련된 모듈을 선택하면 필요한 라이브러리들을 자동으로 찾아내는데 모든 라이브러리들을 가져올 수 있게 체크한다.</p>

<p><img src="http://cfile22.uf.tistory.com/image/216D904152F8576104313C" alt=""></p>

<p>모듈간의 의존성을 검사해서 자동으로 의존성 모듈을 찾아낸다. 모두 체크한다음 Next를 누른다.</p>

<p><img src="http://cfile28.uf.tistory.com/image/26167A3C52F857AA29BE82" alt=""></p>

<p>마지막으로 모듈이 어떤 프레임워크로 개발 되었는지 확인하는 작업에서 디렉토리를 검사해서 <code>AndroidManifest.xml</code>을 찾아내어 안드로이드 프로젝트인 것을 확인하는데 모두 안드로이드 프로젝트 이므로 체크한 상태에서 Finish 버튼을 누른다.</p>

<p><img src="http://cfile3.uf.tistory.com/image/2758143652F857E01F953D" alt=""></p>

<p>이렇게 Import Module 작업을 마치면 우리가 개발하기로한 프로젝트가 담긴 워크스페이스에 SDK와 관련된 모듈들이 모두 import 된 것을 확인할 수 있다.</p>

<p><img src="http://cfile26.uf.tistory.com/image/2264DF3F52F888692AFDEB" alt=""></p>

<h3 id="샘플-프로젝트-실행">샘플 프로젝트 실행</h3>

<p>기본 모듈들을 import한 뒤에 샘플 프로젝트를 실행할 수 있게 된다. 샘플중에서 kakaolink-sample을 실행해보자. 먼저 kakaolink-sample 프로젝트의 <code>AndroidManifest.xml</code> 을 연다. AndroidManifest 파일 안에는 <code>com.kakao.sdk.AppKey</code>라는 엘리먼트가 보이는데 값이 <code>@string/kakao_app_key</code>를 사용하고 있다. <code>res/values/kakao-strings.xml</code> 파일을 열어보자. 예제로 만들어진 <code>kakao_app_key</code>와 <code>kakao_scheme</code>가 보일 것이다. kakao_app_key는 앱 고유 키이고, kakao_scheme는 카카오 어플에서 우리가 만들 카카오 연동 앱을 열어줄 스키마로 앱 키 앞에 kakao를 붙이는 것이다.</p>
<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;resources&gt;</span>
    <span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">&quot;kakao_app_key&quot;</span><span class="nt">&gt;</span>앱키<span class="nt">&lt;/string&gt;</span>
    <span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">&quot;kakao_scheme&quot;</span><span class="nt">&gt;</span>kakao앱키<span class="nt">&lt;/string&gt;</span>
    <span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">&quot;kakaolink_host&quot;</span><span class="nt">&gt;</span>kakaolink<span class="nt">&lt;/string&gt;</span>
<span class="nt">&lt;/resources&gt;</span>
</code></pre></div>
<p>안드로이드 폰으로 빌드해자. 카카오 연동 앱은 반드시 카카오 어플이 있어야만 한다. 즉, 안드로이드 폰에 카카오톡이 설치가 되어 있어야하기 때문에 에뮬레이터에서 사용은 할 수 없다. 카카오톡이 설치된 안드로이드 폰으로 빌드한다. 에러 없이 간단히 실행이 되는 것을 확인할 수 있다.</p>

<p><img src="http://cfile3.uf.tistory.com/image/214F163952F85EFF13D7CA" alt=""></p>

<p>보내기 버튼을 클릭해보자. kakaolink-sample 프로젝트는 Text, Link, Image, 다시 앱으로 돌아오게 연결하는 button 이렇게 전송하는 것을 예제로 만들어져있다. 확인 버튼을 눌러보자.</p>

<p><img src="http://cfile5.uf.tistory.com/image/240F284C52F860691A4674" alt=""></p>

<p>확인 버튼을 누르면 카카오톡의 친구 목록이 나타난다.</p>

<p><img src="http://cfile1.uf.tistory.com/image/2462BB4752F8611901A48D" alt=""></p>

<p>친구 목록 중에서 한명을 선택하자. 우리는 연구소의 강승준 연구원을 선택했다.</p>

<p><img src="http://cfile30.uf.tistory.com/image/27499B4252F861792CD471" alt=""></p>

<p>kakaolink로 전송할 수 있는 친구는 여러명을 동시에 선택할 수 있다. 예로 한명만 선택했는데 여러명을 체크하면 전송할 친구들이 여러면 체크가되고 전송 목록에 담길 것이다. 확인 버튼을 클릭한다. 그러면 선택한 친구에게 Text, Image, Link, 그리고 앱을 열수 있는 버튼이 만들어져서 전송되는 것을 확인할 수 있다.</p>

<p><img src="http://cfile22.uf.tistory.com/image/2204504352F861C519FD69" alt=""></p>

<p>앱으로 이동이라는 버튼을 누르면 우리가 샘플로 실행한 kakao-sample 앱이 다시 열리는 것을 확인할 수 있다.</p>

<p><img src="http://cfile3.uf.tistory.com/image/214F163952F85EFF13D7CA" alt=""></p>

<p>간단하게 kakaolink-sample 앱을 실행해봤다. 우리가 실행한 앱은 Kakao SDK에 들어있는 카카오 개발자가 배포한 간단한 kakao-sample 앱이였다. 이젠 우리가 직접 우리가 만든 앱에서 kakao link를 만들어서 실행해보자.</p>

<h3 id="기본-설정">기본 설정</h3>

<p>위의 예제에서 확인한 결과 카카오 연동 앱에서 kakaolink를 사용하기 위해서 <code>kakao_app_key</code>와 <code>kakao_scheme</code>가 필요하다는 것을 확인했다. sf-kakao-demo 프로젝트의 <code>res/values/strings.xml</code>에 다음을 추가한다. kakao_app_key에는 우리가 카카오 개발자 사이트에 등록한 앱의 app key를 입력하고 kakao_scheme에는 앱 키 앞에 kakao를 붙여서 입력한다.</p>
<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="nt">&lt;resources&gt;</span>
    <span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">&quot;app_name&quot;</span><span class="nt">&gt;</span>sf-kakao-demo<span class="nt">&lt;/string&gt;</span>

    <span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">&quot;kakao_app_key&quot;</span><span class="nt">&gt;</span>앱키<span class="nt">&lt;/string&gt;</span>
    <span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">&quot;kakao_scheme&quot;</span><span class="nt">&gt;</span>kakao앱키<span class="nt">&lt;/string&gt;</span>
    <span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">&quot;kakaolink_host&quot;</span><span class="nt">&gt;</span>kakaodemo<span class="nt">&lt;/string&gt;</span>
<span class="nt">&lt;/resources&gt;</span>
</code></pre></div>
<p>카카오 SDK를 사용하기 위해서는 AndroidManifest.xml 파일을 열어서 다음과 같이 메타 정보를 입력해야한다.</p>
<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="nt">&lt;manifest</span> <span class="na">xmlns:android=</span><span class="s">&quot;http://schemas.android.com/apk/res/android&quot;</span>
          <span class="na">package=</span><span class="s">&quot;net.saltfactory.tutorial.kakaodemo&quot;</span>
          <span class="na">android:versionCode=</span><span class="s">&quot;1&quot;</span>
          <span class="na">android:versionName=</span><span class="s">&quot;1.0&quot;</span><span class="nt">&gt;</span>
    <span class="c">&lt;!--&lt;uses-sdk android:minSdkVersion=&quot;17&quot;/&gt;--&gt;</span>
    <span class="nt">&lt;uses-sdk</span> <span class="na">android:minSdkVersion=</span><span class="s">&quot;11&quot;</span> <span class="na">android:targetSdkVersion=</span><span class="s">&quot;17&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;application</span> <span class="na">android:label=</span><span class="s">&quot;@string/app_name&quot;</span> <span class="na">android:icon=</span><span class="s">&quot;@drawable/ic_launcher&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;activity</span> <span class="na">android:name=</span><span class="s">&quot;MyActivity&quot;</span>
                  <span class="na">android:label=</span><span class="s">&quot;@string/app_name&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;intent-filter&gt;</span>
                <span class="nt">&lt;action</span> <span class="na">android:name=</span><span class="s">&quot;android.intent.action.MAIN&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;category</span> <span class="na">android:name=</span><span class="s">&quot;android.intent.category.LAUNCHER&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;data</span> <span class="na">android:host=</span><span class="s">&quot;@string/kakaolink_host&quot;</span> <span class="na">android:scheme=</span><span class="s">&quot;@string/kakao_scheme&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/intent-filter&gt;</span>
        <span class="nt">&lt;/activity&gt;</span>

        <span class="nt">&lt;meta-data</span> <span class="na">android:name=</span><span class="s">&quot;com.kakao.sdk.AppKey&quot;</span> <span class="na">android:value=</span><span class="s">&quot;@string/kakao_app_key&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/application&gt;</span>


<span class="nt">&lt;/manifest&gt;</span>
</code></pre></div>
<p>다음은 sf-kakao-demo 프로젝트를 열어서 기본적으로 만들어진 <code>MyActivity.java</code> 파일을 수정한다. sf-kakao-demo 프로젝트는 간단히 버튼을 누르면 카카오링크가 카카오톡으로 전달되는 예제이다. 우선 버튼을 하나 만들자. <code>res/layout/main.xml</code>을 열어서 버튼을 하나 추가하자.</p>
<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="nt">&lt;LinearLayout</span> <span class="na">xmlns:android=</span><span class="s">&quot;http://schemas.android.com/apk/res/android&quot;</span>
              <span class="na">android:orientation=</span><span class="s">&quot;vertical&quot;</span>
              <span class="na">android:layout_width=</span><span class="s">&quot;fill_parent&quot;</span>
              <span class="na">android:layout_height=</span><span class="s">&quot;fill_parent&quot;</span>
        <span class="nt">&gt;</span>
    <span class="c">&lt;!--&lt;TextView--&gt;</span>
    <span class="c">&lt;!--android:layout_width=&quot;fill_parent&quot;--&gt;</span>
    <span class="c">&lt;!--android:layout_height=&quot;wrap_content&quot;--&gt;</span>
    <span class="c">&lt;!--android:text=&quot;Hello World, MyActivity&quot;--&gt;</span>
    <span class="c">&lt;!--/&gt;--&gt;</span>

    <span class="nt">&lt;Button</span> <span class="na">android:id=</span><span class="s">&quot;@+id/sf_button_kakao_link&quot;</span>
            <span class="na">android:layout_width=</span><span class="s">&quot;fill_parent&quot;</span>
            <span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span>
            <span class="na">android:text=</span><span class="s">&quot;카카오링크 테스트&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/LinearLayout&gt;</span>
</code></pre></div>
<p><code>MyMainActivity</code> 코드를 다음 과 같이 수정하자.</p>

<p>카카오링크로 보낼 수 있는 컨텐츠는 Text, Image, Webs Link, App Link를 보낼 수 있다.
* <strong>Text</strong>는 <code>kakaoTalkLinkMessageBuilder.addText(&quot;텍스트&quot;);</code>
* <strong>Image</strong>는<code>kakaoTalkLinkMessageBuilder.addImage(&quot;이미지 URI&quot;, 가로크기, 세로크기);</code>
* <strong>Web</strong> Link는 <code>kakaoTalkLinkMessageBuilder.addWebLink(&quot;개발자 사이트에 등록된 web site&quot;);</code>
* <strong>App Link</strong>는 <code>kakaoTalkLinkMessageBuilder.addAppLink(&quot;버튼에 올라갈 텍스트&quot;);</code></p>

<p>여기서 주의할 점은 Link는 똑같은 타입으로 두개 지정할 수 없다. 즉, Web Link와 App Link를 동시에 사용할 수 없다. 만약 두가지 Link를 동시에 사용하면 에러가 발생한다. 그럼 Web Link도 보내고 App Link 도 보낼려면 어떻게 하면 좋을까? 카카오는 <code>addWebButton()</code>과 <code>addAppButton()</code>을 지원한다. 즉 하나는 Link로 하나는 Button으로 보내면 된다. 아래 예제는 Web Link와 App Button을 사용한 예제이다.</p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="n">net</span><span class="o">.</span><span class="na">saltfactory</span><span class="o">.</span><span class="na">tutorial</span><span class="o">.</span><span class="na">kakaodemo</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">android.app.Activity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.app.AlertDialog</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.os.Bundle</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.view.View</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.widget.Button</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.kakao.AppActionBuilder</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.kakao.KakaoLink</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.kakao.KakaoLinkParseException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.kakao.KakaoTalkLinkMessageBuilder</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyActivity</span> <span class="kd">extends</span> <span class="n">Activity</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">KakaoLink</span> <span class="n">kakaoLink</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">KakaoTalkLinkMessageBuilder</span> <span class="n">kakaoTalkLinkMessageBuilder</span><span class="o">;</span>

    <span class="cm">/**</span>
<span class="cm">     * Called when the activity is first created.</span>
<span class="cm">     */</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">);</span>
        <span class="n">setContentView</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">main</span><span class="o">);</span>

        <span class="kd">final</span> <span class="n">String</span> <span class="n">stringText</span> <span class="o">=</span> <span class="s">&quot;카카오링크 테스트 텍스트&quot;</span><span class="o">;</span>
        <span class="kd">final</span> <span class="n">String</span> <span class="n">stringImage</span> <span class="o">=</span> <span class="s">&quot;https://fbcdn-profile-a.akamaihd.net/hprofile-ak-prn2/t1/p320x320/1377444_10200267928260600_37355712_n.jpg&quot;</span><span class="o">;</span>
        <span class="kd">final</span> <span class="n">String</span> <span class="n">stringUrl</span> <span class="o">=</span> <span class="s">&quot;http://blog.saltfactory.net&quot;</span><span class="o">;</span>

        <span class="k">try</span> <span class="o">{</span>
            <span class="n">kakaoLink</span> <span class="o">=</span> <span class="n">KakaoLink</span><span class="o">.</span><span class="na">getKakaoLink</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
            <span class="n">kakaoTalkLinkMessageBuilder</span> <span class="o">=</span> <span class="n">kakaoLink</span><span class="o">.</span><span class="na">createKakaoTalkLinkMessageBuilder</span><span class="o">();</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">KakaoLinkParseException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
            <span class="n">alert</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
        <span class="o">}</span>


        <span class="n">Button</span> <span class="n">button</span> <span class="o">=</span> <span class="o">(</span><span class="n">Button</span><span class="o">)</span> <span class="n">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">sf_button_kakao_link</span><span class="o">);</span>
        <span class="n">button</span><span class="o">.</span><span class="na">setOnClickListener</span><span class="o">(</span><span class="k">new</span> <span class="n">View</span><span class="o">.</span><span class="na">OnClickListener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onClick</span><span class="o">(</span><span class="n">View</span> <span class="n">view</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">try</span> <span class="o">{</span>
                    <span class="n">kakaoTalkLinkMessageBuilder</span><span class="o">.</span><span class="na">addText</span><span class="o">(</span><span class="n">stringText</span><span class="o">);</span>
                    <span class="n">kakaoTalkLinkMessageBuilder</span><span class="o">.</span><span class="na">addImage</span><span class="o">(</span><span class="n">stringImage</span><span class="o">,</span> <span class="mi">320</span><span class="o">,</span> <span class="mi">320</span><span class="o">);</span>
                    <span class="n">kakaoTalkLinkMessageBuilder</span><span class="o">.</span><span class="na">addWebLink</span><span class="o">(</span><span class="s">&quot;블로그 이동&quot;</span><span class="o">,</span> <span class="n">stringUrl</span><span class="o">);</span>

                    <span class="n">kakaoTalkLinkMessageBuilder</span><span class="o">.</span><span class="na">addAppButton</span><span class="o">(</span><span class="s">&quot;앱열기&quot;</span><span class="o">,</span>
                            <span class="k">new</span> <span class="nf">AppActionBuilder</span><span class="o">()</span>
                                    <span class="o">.</span><span class="na">setAndroidExecuteURLParam</span><span class="o">(</span><span class="s">&quot;target=main&quot;</span><span class="o">)</span>
                                    <span class="o">.</span><span class="na">setIOSExecuteURLParam</span><span class="o">(</span><span class="s">&quot;target=main&quot;</span><span class="o">,</span> <span class="n">AppActionBuilder</span><span class="o">.</span><span class="na">DEVICE_TYPE</span><span class="o">.</span><span class="na">PHONE</span><span class="o">).</span><span class="na">build</span><span class="o">());</span>

                    <span class="n">kakaoLink</span><span class="o">.</span><span class="na">sendMessage</span><span class="o">(</span><span class="n">kakaoTalkLinkMessageBuilder</span><span class="o">.</span><span class="na">build</span><span class="o">());</span>

                <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">KakaoLinkParseException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
                    <span class="n">alert</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
                <span class="o">}</span>


            <span class="o">}</span>
        <span class="o">});</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">alert</span><span class="o">(</span><span class="n">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">new</span> <span class="n">AlertDialog</span><span class="o">.</span><span class="na">Builder</span><span class="o">(</span><span class="k">this</span><span class="o">)</span>
                <span class="o">.</span><span class="na">setIcon</span><span class="o">(</span><span class="n">android</span><span class="o">.</span><span class="na">R</span><span class="o">.</span><span class="na">drawable</span><span class="o">.</span><span class="na">ic_dialog_alert</span><span class="o">)</span>
                <span class="o">.</span><span class="na">setTitle</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">app_name</span><span class="o">)</span>
                <span class="o">.</span><span class="na">setMessage</span><span class="o">(</span><span class="n">message</span><span class="o">)</span>
                <span class="o">.</span><span class="na">setPositiveButton</span><span class="o">(</span><span class="n">android</span><span class="o">.</span><span class="na">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">ok</span><span class="o">,</span> <span class="kc">null</span><span class="o">)</span>
                <span class="o">.</span><span class="na">create</span><span class="o">().</span><span class="na">show</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>
<p>안드로이드 디바이스로 빌드해보자. 우리는 레이아웃에 버튼하나만 추가했기 때문에 다음과 같이 실행 될 것이다.</p>

<p><img src="http://cfile28.uf.tistory.com/image/21647B4052F88DA7349189" alt=""></p>

<p>버튼을 누르면 카카오톡 친구 목록이 나타난다. 친구 목록중에 카카오링크를 보낼 친구를 선택하면 다음과 같이 카카오톡으로 text, image, link, 앱 연결 버튼을 보낼 수 있다.</p>

<p><img src="http://cfile6.uf.tistory.com/image/2149344052F8804F2ACAB0" alt=""></p>

<h2 id="결론">결론</h2>

<p>카카오는 이전보다 좀더 확장된 SDK를 공개했다. SDK를 다운 받아서 페이스북 SDK 처럼 카카오와 연동할 수 있는 방법을 제공하고 있다. 카카오 SDK에 관련된 내용은 계속 연재할 예정이다. 첫번째로 카카오 개발자 페이지는 이클립스로 개발하는 방법만 설명이 되어 있어서 우리가 개발하는 IntelliJ로 개발하는 방법을 소개했다. 그리고 첫번째 예로 카카오링크를 앱에서 사용하는 방법을 소개했다. 카카오링크는 카카오토크빌드를 이용해서 메세지를 만들어서 링크를 보낼 수 있는데 이 때 주의해야할 점은 Web Link와 App Link를 동시에 사용할 수 없다는 것이다. 하지만 Web Link와 App Button을 동시에 사용하면 두가지 링크를 모두 메세지로 전송 할 수 있다는 것도 확인했다. 앞으로 카카오 SDK에 대한 소개를 계속하며 iOS에 관련된 자료도 곧 포스팅할 예정이다.</p>

<h2 id="소스코드">소스코드</h2>

<ul>
<li><a href="https://github.com/saltfactory/saltfactory-android-tutorial/releases/tag/kakaolink-demo">https://github.com/saltfactory/saltfactory-android-tutorial/releases/tag/kakaolink-demo</a></li>
</ul>

<h2 id="참고">참고</h2>

<ol>
<li><a href="https://developers.kakao.com/docs">https://developers.kakao.com/docs</a></li>
</ol>

<h2 id="연구원-소개">연구원 소개</h2>

<ul>
<li>작성자 : <a href="http://about.me/saltfactory">송성광</a> 개발 연구원</li>
<li>블로그 : <a href="http://blog.saltfactory.net">http://blog.saltfactory.net</a></li>
<li>이메일 : <a href="mailto:saltfactory@gmail.com">saltfactory@gmail.com</a></li>
<li>트위터 : <a href="https://twitter.com/saltfactory">@saltfactory</a></li>
<li>페이스북 : <a href="https://facebook.com/salthub">https://facebook.com/salthub</a></li>
<li>연구소 : <a href="http://www.hibrain.net">하이브레인넷</a> 부설연구소</li>
<li>연구실 : <a href="http://dblab.changwon.ac.kr">창원대학교 데이터베이스 연구실</a></li>
</ul>

  </article>

  
  <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    
      var disqus_shortname = 'saltfactoryblog';
    
    // 
    
     var disqus_identifier = 'http://blog.saltfactory.net/225'; 
    


    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

  



</div>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">saltfactory's blog</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col  footer-col-1">
        <ul class="contact-list">
          <!-- <li>saltfactory's blog</li> -->
          <li><img class="profile" src="/assets/images/profile.png"/></li>
          <li><a href="mailto:saltfactory@gmail.com">saltfactory@gmail.com</a></li>
        </ul>
      </div>

      <div class="footer-col  footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/saltfactory">
              <span class="icon  icon--github">
                <svg viewBox="0 0 16 16">
                  <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
                </svg>
              </span>

              <span class="username">saltfactory</span>
            </a>
          </li>
          

          
          <li>
            <a href="https://twitter.com/saltfactory">
              <span class="icon  icon--twitter">
                <svg viewBox="0 0 16 16">
                  <path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809
                  c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/>
                </svg>
              </span>

              <span class="username">@saltfactory</span>
            </a>
          </li>
          

          
          <li>
            <a href="https://facebook.com/salthub">
              <span class="icon icon--facebook">
                <!-- <svg class="facebook-icon-svg" viewBox="0 0 60 60" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
    <path d="M0.112290344,30 C0.112290344,13.4314567 13.3426506,0 29.663129,0 C45.9836073,0 59.2139676,13.4314567 59.2139676,30 C59.2139676,46.5685433 45.9836073,60 29.663129,60 C13.3426506,60 0.112290344,46.5685433 0.112290344,30 Z M0.112290344,30" fill="#C2C2C2" sketch:type="MSShapeGroup"></path>
	<path d="M32.1341457,46.3196729 L32.1341457,29.9980891 L36.5657565,29.9980891 L37.1530406,24.3735809 L32.1341457,24.3735809 L32.141675,21.5584604 C32.141675,20.091502 32.2787707,19.3054722 34.351206,19.3054722 L37.1216686,19.3054722 L37.1216686,13.6803271 L32.6894304,13.6803271 C27.3655995,13.6803271 25.491749,16.4088187 25.491749,20.9972835 L25.491749,24.3742179 L22.1732173,24.3742179 L22.1732173,29.998726 L25.491749,29.998726 L25.491749,46.3196729 L32.1341457,46.3196729 Z M32.1341457,46.3196729" id="Path" fill="#FFFFFF" sketch:type="MSShapeGroup"></path>
</svg>
 -->
                <svg viewBox="0 0 16 28">
                  <path id="logo" d="M14.984 0.187v4.125h-2.453q-1.344 0-1.813 0.562t-0.469 1.687v2.953h4.578l-0.609 4.625h-3.969v11.859h-4.781v-11.859h-3.984v-4.625h3.984v-3.406q0-2.906 1.625-4.508t4.328-1.602q2.297 0 3.563 0.187z"></path>
                </svg>
              </span>
              <span class="username">salthub</span>
            </a>
          </li>

        </ul>
      </div>

      <div class="footer-col  footer-col-3">
        <p class="text"></p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
