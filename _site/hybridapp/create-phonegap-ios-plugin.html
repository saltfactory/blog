<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>PhoneGap iOS 플러그인 개발</title>
    <meta name="viewport" content="width=device-width">
    <meta name="description" content="">
    <link rel="canonical" href="/series/hybridapp/create-phonegap-ios-plugin.html">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/series/assets/css/main.css">
    <!-- <link rel='stylesheet' type='text/css' href='/assets/css/main.css' /> -->

    
</head>


    <body>

    <header class="site-header">

  <div class="wrap">

    <a class="site-title" href="/series/">saltfactory's series</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
           viewBox="0 0 18 15" enable-background="new 0 0 18 15" xml:space="preserve">
          <path fill="#505050" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0
            h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#505050" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484
            h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#505050" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0
            c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>
      <div class="trigger">
        <a class="page-link" href="/">saltfactory.net</a>
        <a class="page-link" href="/guestbook">Guestbook</a>
        
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrap">
      <div class="post">

  <header class="post-header">
    <h1>PhoneGap iOS 플러그인 개발</h1>
    <p class="meta">Mar 17, 2014</p>
  </header>

  <article class="post-content">
  <h2 id="서론">서론</h2>

<p><a href="http://phonegap.com">PhoneGap</a>은 멀티 플랫폼 하이브리드 앱 개발 프레임워크이다. 하이브리드 앱이라는 말은 웹의 기술과 네이티브앱의 기술을 융합해서 사용하여 만든 앱이다. 웹에서 접근할 수 없는 네이티브 자원을 네이티브 코드로 만들고 웹에서 접근할 수 있는 인터페이스를 이용해서 웹과 네이티브의 자원을 함께 사용할 수 있는 것을 또는 반대의 개발 방법을 적용하여 앱을 만들 수 있는 것을  말한다. PhoneGap에서는 이런 일련의 과정을 Plugins이라는 것을 사용해서 구현할 수 있다. <strong>Appspresso</strong>에서는 <strong>PDK</strong>를 이용해서 Plugins를 만들수 있지만 <strong>PhoneGap</strong>에서는 PDK와 같은 Plugin Development Kit은 없지만 PhoneGap에서 Plugins을 만들 수 있는 네이티브 클래스를 상속받고 웹에서 접근할 수 있는 JavaScript 인터페이스를 제공하고 있다. 이번 포스팅에서는 iOS 용 앱을 개발을 할 때 네이티브 코드를 사용하는 Plugins을 만들어서 PhoneGap 프로젝트에서 웹과 네이티브 자원을 서로 사용할 수 있는 방법을 소개한다. 이전 포스팅(<a href="http://blog.saltfactory.net/233)%EC%97%90%EC%84%9C%EB%8A%94">http://blog.saltfactory.net/233)에서는</a> PhoneGap의 Plugins 저장소에서 Plugins을 설치하는 방법을 살펴보았다. 이번 포스팅에서는 PhoneGap 프로젝트에 Plugins 저장소에서 가져와서 설치하는 것이 아니라 직접 만든 Plugins을 프로젝트에 설치하는 방법도 함께 소개한다.</p>

<!--more-->

<h2 id="phonegap-plugins-프로젝트-생성">PhoneGap Plugins 프로젝트 생성</h2>

<p>Plugins을 만들기 위해서 먼저 PhoneGap CLI로 PhoneGap 프로젝트를 생성한다.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">phonegap create sf-phonegap-plugin-demo -i net.saltfactory.tutorial.phonegap.plugindemo -n SF-PhoneGap-Plugin-Demo
</code></pre></div>
<p><img src="http://cfile27.uf.tistory.com/image/27686B3C531FE7302375E4" alt="phonegap create {max-width:600px;}"></p>

<p>현재 PhoneGap CLI 버전( 3.4.0-0.19.7 )에서는 PhoneGap CLI로 프로젝트를 만들면 <strong>identifier</strong>와 프로젝트 이름이 디폴트에서 변경되지 않는 문제가 있다.(참조 : <a href="http://blog.saltfactory.net/234">http://blog.saltfactory.net/234</a>) 에디터로 <code>./www/config.xml</code> 을 열어서 다음을 수정하자.</p>
<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>

<span class="c">&lt;!-- config.xml reference: https://build.phonegap.com/docs/config-xml --&gt;</span>
<span class="nt">&lt;widget</span> <span class="na">xmlns     =</span> <span class="s">&quot;http://www.w3.org/ns/widgets&quot;</span>
        <span class="na">xmlns:gap =</span> <span class="s">&quot;http://phonegap.com/ns/1.0&quot;</span>
        <span class="na">id        =</span> <span class="s">&quot;net.saltfactory.tutorial.phonegap.plugindemo&quot;</span>
        <span class="na">version   =</span> <span class="s">&quot;1.0.0&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;name&gt;</span>SF-PhoneGap-Plugin-Demo<span class="nt">&lt;/name&gt;</span>

    <span class="nt">&lt;description&gt;</span>
        Hello World sample application that responds to the deviceready event.
    <span class="nt">&lt;/description&gt;</span>

    <span class="nt">&lt;author</span> <span class="na">href=</span><span class="s">&quot;http://phonegap.com&quot;</span> <span class="na">email=</span><span class="s">&quot;support@phonegap.com&quot;</span><span class="nt">&gt;</span>
        PhoneGap Team
    <span class="nt">&lt;/author&gt;</span>

    <span class="c">&lt;!--</span>
<span class="c">        Enable individual API permissions here.</span>
<span class="c">        The &quot;device&quot; permission is required for the &#39;deviceready&#39; event.</span>
<span class="c">    --&gt;</span>
    <span class="nt">&lt;feature</span> <span class="na">name=</span><span class="s">&quot;http://api.phonegap.com/1.0/device&quot;</span> <span class="nt">/&gt;</span>

    <span class="c">&lt;!--</span>
<span class="c">        If you do not want any permissions to be added to your app, add the</span>
<span class="c">        following tag to your config.xml; you will still have the INTERNET</span>
<span class="c">        permission on your app, which PhoneGap requires.</span>
<span class="c">    --&gt;</span>
    <span class="nt">&lt;preference</span> <span class="na">name=</span><span class="s">&quot;permissions&quot;</span>                <span class="na">value=</span><span class="s">&quot;none&quot;</span><span class="nt">/&gt;</span>

    <span class="c">&lt;!-- Customize your app and platform with the preference element. --&gt;</span>
    <span class="c">&lt;!-- &lt;preference name=&quot;phonegap-version&quot;      value=&quot;3.4.0&quot; /&gt; --&gt;</span>      <span class="c">&lt;!-- all: current version of PhoneGap --&gt;</span>
    <span class="nt">&lt;preference</span> <span class="na">name=</span><span class="s">&quot;orientation&quot;</span>                <span class="na">value=</span><span class="s">&quot;default&quot;</span> <span class="nt">/&gt;</span>        <span class="c">&lt;!-- all: default means both landscape and portrait are enabled --&gt;</span>
    <span class="nt">&lt;preference</span> <span class="na">name=</span><span class="s">&quot;target-device&quot;</span>              <span class="na">value=</span><span class="s">&quot;universal&quot;</span> <span class="nt">/&gt;</span>      <span class="c">&lt;!-- all: possible values handset, tablet, or universal --&gt;</span>
    <span class="nt">&lt;preference</span> <span class="na">name=</span><span class="s">&quot;fullscreen&quot;</span>                 <span class="na">value=</span><span class="s">&quot;true&quot;</span> <span class="nt">/&gt;</span>           <span class="c">&lt;!-- all: hides the status bar at the top of the screen --&gt;</span>
    <span class="nt">&lt;preference</span> <span class="na">name=</span><span class="s">&quot;webviewbounce&quot;</span>              <span class="na">value=</span><span class="s">&quot;true&quot;</span> <span class="nt">/&gt;</span>           <span class="c">&lt;!-- ios: control whether the screen &#39;bounces&#39; when scrolled beyond the top --&gt;</span>
    <span class="nt">&lt;preference</span> <span class="na">name=</span><span class="s">&quot;prerendered-icon&quot;</span>           <span class="na">value=</span><span class="s">&quot;true&quot;</span> <span class="nt">/&gt;</span>           <span class="c">&lt;!-- ios: if icon is prerendered, iOS will not apply it&#39;s gloss to the app&#39;s icon on the user&#39;s home screen --&gt;</span>
    <span class="nt">&lt;preference</span> <span class="na">name=</span><span class="s">&quot;stay-in-webview&quot;</span>            <span class="na">value=</span><span class="s">&quot;false&quot;</span> <span class="nt">/&gt;</span>          <span class="c">&lt;!-- ios: external links should open in the default browser, &#39;true&#39; would use the webview the app lives in --&gt;</span>
    <span class="nt">&lt;preference</span> <span class="na">name=</span><span class="s">&quot;ios-statusbarstyle&quot;</span>         <span class="na">value=</span><span class="s">&quot;black-opaque&quot;</span> <span class="nt">/&gt;</span>   <span class="c">&lt;!-- ios: black-translucent will appear black because the PhoneGap webview doesn&#39;t go beneath the status bar --&gt;</span>
    <span class="nt">&lt;preference</span> <span class="na">name=</span><span class="s">&quot;detect-data-types&quot;</span>          <span class="na">value=</span><span class="s">&quot;true&quot;</span> <span class="nt">/&gt;</span>           <span class="c">&lt;!-- ios: controls whether data types (such as phone no. and dates) are automatically turned into links by the system --&gt;</span>
    <span class="nt">&lt;preference</span> <span class="na">name=</span><span class="s">&quot;exit-on-suspend&quot;</span>            <span class="na">value=</span><span class="s">&quot;false&quot;</span> <span class="nt">/&gt;</span>          <span class="c">&lt;!-- ios: if set to true, app will terminate when home button is pressed --&gt;</span>
    <span class="nt">&lt;preference</span> <span class="na">name=</span><span class="s">&quot;show-splash-screen-spinner&quot;</span> <span class="na">value=</span><span class="s">&quot;true&quot;</span> <span class="nt">/&gt;</span>           <span class="c">&lt;!-- ios: if set to false, the spinner won&#39;t appear on the splash screen during app loading --&gt;</span>
    <span class="nt">&lt;preference</span> <span class="na">name=</span><span class="s">&quot;auto-hide-splash-screen&quot;</span>    <span class="na">value=</span><span class="s">&quot;true&quot;</span> <span class="nt">/&gt;</span>           <span class="c">&lt;!-- ios: if set to false, the splash screen must be hidden using a JavaScript API --&gt;</span>
    <span class="nt">&lt;preference</span> <span class="na">name=</span><span class="s">&quot;disable-cursor&quot;</span>             <span class="na">value=</span><span class="s">&quot;false&quot;</span> <span class="nt">/&gt;</span>          <span class="c">&lt;!-- blackberry: prevents a mouse-icon/cursor from being displayed on the app --&gt;</span>
    <span class="nt">&lt;preference</span> <span class="na">name=</span><span class="s">&quot;android-minSdkVersion&quot;</span>      <span class="na">value=</span><span class="s">&quot;7&quot;</span> <span class="nt">/&gt;</span>              <span class="c">&lt;!-- android: MIN SDK version supported on the target device. MAX version is blank by default. --&gt;</span>
    <span class="nt">&lt;preference</span> <span class="na">name=</span><span class="s">&quot;android-installLocation&quot;</span>    <span class="na">value=</span><span class="s">&quot;auto&quot;</span> <span class="nt">/&gt;</span>           <span class="c">&lt;!-- android: app install location. &#39;auto&#39; will choose. &#39;internalOnly&#39; is device memory. &#39;preferExternal&#39; is SDCard. --&gt;</span>

    <span class="c">&lt;!-- Plugins can also be added here. --&gt;</span>
    <span class="c">&lt;!--</span>
<span class="c">        &lt;gap:plugin name=&quot;Example&quot; /&gt;</span>
<span class="c">        A list of available plugins are available at https://build.phonegap.com/docs/plugins</span>
<span class="c">    --&gt;</span>

    <span class="c">&lt;!-- Define app icon for each platform. --&gt;</span>
    <span class="nt">&lt;icon</span> <span class="na">src=</span><span class="s">&quot;icon.png&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;icon</span> <span class="na">src=</span><span class="s">&quot;res/icon/android/icon-36-ldpi.png&quot;</span>   <span class="na">gap:platform=</span><span class="s">&quot;android&quot;</span>    <span class="na">gap:density=</span><span class="s">&quot;ldpi&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;icon</span> <span class="na">src=</span><span class="s">&quot;res/icon/android/icon-48-mdpi.png&quot;</span>   <span class="na">gap:platform=</span><span class="s">&quot;android&quot;</span>    <span class="na">gap:density=</span><span class="s">&quot;mdpi&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;icon</span> <span class="na">src=</span><span class="s">&quot;res/icon/android/icon-72-hdpi.png&quot;</span>   <span class="na">gap:platform=</span><span class="s">&quot;android&quot;</span>    <span class="na">gap:density=</span><span class="s">&quot;hdpi&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;icon</span> <span class="na">src=</span><span class="s">&quot;res/icon/android/icon-96-xhdpi.png&quot;</span>  <span class="na">gap:platform=</span><span class="s">&quot;android&quot;</span>    <span class="na">gap:density=</span><span class="s">&quot;xhdpi&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;icon</span> <span class="na">src=</span><span class="s">&quot;res/icon/blackberry/icon-80.png&quot;</span>     <span class="na">gap:platform=</span><span class="s">&quot;blackberry&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;icon</span> <span class="na">src=</span><span class="s">&quot;res/icon/blackberry/icon-80.png&quot;</span>     <span class="na">gap:platform=</span><span class="s">&quot;blackberry&quot;</span> <span class="na">gap:state=</span><span class="s">&quot;hover&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;icon</span> <span class="na">src=</span><span class="s">&quot;res/icon/ios/icon-57.png&quot;</span>            <span class="na">gap:platform=</span><span class="s">&quot;ios&quot;</span>        <span class="na">width=</span><span class="s">&quot;57&quot;</span> <span class="na">height=</span><span class="s">&quot;57&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;icon</span> <span class="na">src=</span><span class="s">&quot;res/icon/ios/icon-72.png&quot;</span>            <span class="na">gap:platform=</span><span class="s">&quot;ios&quot;</span>        <span class="na">width=</span><span class="s">&quot;72&quot;</span> <span class="na">height=</span><span class="s">&quot;72&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;icon</span> <span class="na">src=</span><span class="s">&quot;res/icon/ios/icon-57-2x.png&quot;</span>         <span class="na">gap:platform=</span><span class="s">&quot;ios&quot;</span>        <span class="na">width=</span><span class="s">&quot;114&quot;</span> <span class="na">height=</span><span class="s">&quot;114&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;icon</span> <span class="na">src=</span><span class="s">&quot;res/icon/ios/icon-72-2x.png&quot;</span>         <span class="na">gap:platform=</span><span class="s">&quot;ios&quot;</span>        <span class="na">width=</span><span class="s">&quot;144&quot;</span> <span class="na">height=</span><span class="s">&quot;144&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;icon</span> <span class="na">src=</span><span class="s">&quot;res/icon/webos/icon-64.png&quot;</span>          <span class="na">gap:platform=</span><span class="s">&quot;webos&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;icon</span> <span class="na">src=</span><span class="s">&quot;res/icon/windows-phone/icon-48.png&quot;</span>  <span class="na">gap:platform=</span><span class="s">&quot;winphone&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;icon</span> <span class="na">src=</span><span class="s">&quot;res/icon/windows-phone/icon-173.png&quot;</span> <span class="na">gap:platform=</span><span class="s">&quot;winphone&quot;</span>   <span class="na">gap:role=</span><span class="s">&quot;background&quot;</span> <span class="nt">/&gt;</span>

    <span class="c">&lt;!-- Define app splash screen for each platform. --&gt;</span>
    <span class="nt">&lt;gap:splash</span> <span class="na">src=</span><span class="s">&quot;res/screen/android/screen-ldpi-portrait.png&quot;</span>  <span class="na">gap:platform=</span><span class="s">&quot;android&quot;</span> <span class="na">gap:density=</span><span class="s">&quot;ldpi&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;gap:splash</span> <span class="na">src=</span><span class="s">&quot;res/screen/android/screen-mdpi-portrait.png&quot;</span>  <span class="na">gap:platform=</span><span class="s">&quot;android&quot;</span> <span class="na">gap:density=</span><span class="s">&quot;mdpi&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;gap:splash</span> <span class="na">src=</span><span class="s">&quot;res/screen/android/screen-hdpi-portrait.png&quot;</span>  <span class="na">gap:platform=</span><span class="s">&quot;android&quot;</span> <span class="na">gap:density=</span><span class="s">&quot;hdpi&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;gap:splash</span> <span class="na">src=</span><span class="s">&quot;res/screen/android/screen-xhdpi-portrait.png&quot;</span> <span class="na">gap:platform=</span><span class="s">&quot;android&quot;</span> <span class="na">gap:density=</span><span class="s">&quot;xhdpi&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;gap:splash</span> <span class="na">src=</span><span class="s">&quot;res/screen/blackberry/screen-225.png&quot;</span>         <span class="na">gap:platform=</span><span class="s">&quot;blackberry&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;gap:splash</span> <span class="na">src=</span><span class="s">&quot;res/screen/ios/screen-iphone-portrait.png&quot;</span>    <span class="na">gap:platform=</span><span class="s">&quot;ios&quot;</span>     <span class="na">width=</span><span class="s">&quot;320&quot;</span> <span class="na">height=</span><span class="s">&quot;480&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;gap:splash</span> <span class="na">src=</span><span class="s">&quot;res/screen/ios/screen-iphone-portrait-2x.png&quot;</span> <span class="na">gap:platform=</span><span class="s">&quot;ios&quot;</span>     <span class="na">width=</span><span class="s">&quot;640&quot;</span> <span class="na">height=</span><span class="s">&quot;960&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;gap:splash</span> <span class="na">src=</span><span class="s">&quot;res/screen/ios/screen-ipad-portrait.png&quot;</span>      <span class="na">gap:platform=</span><span class="s">&quot;ios&quot;</span>     <span class="na">width=</span><span class="s">&quot;768&quot;</span> <span class="na">height=</span><span class="s">&quot;1024&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;gap:splash</span> <span class="na">src=</span><span class="s">&quot;res/screen/ios/screen-ipad-landscape.png&quot;</span>     <span class="na">gap:platform=</span><span class="s">&quot;ios&quot;</span>     <span class="na">width=</span><span class="s">&quot;1024&quot;</span> <span class="na">height=</span><span class="s">&quot;768&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;gap:splash</span> <span class="na">src=</span><span class="s">&quot;res/screen/windows-phone/screen-portrait.jpg&quot;</span> <span class="na">gap:platform=</span><span class="s">&quot;winphone&quot;</span> <span class="nt">/&gt;</span>

    <span class="c">&lt;!--</span>
<span class="c">        Define access to external domains.</span>

<span class="c">        &lt;access /&gt;            - a blank access tag denies access to all external resources.</span>
<span class="c">        &lt;access origin=&quot;*&quot; /&gt; - a wildcard access tag allows access to all external resource.</span>

<span class="c">        Otherwise, you can specify specific domains:</span>
<span class="c">    --&gt;</span>
    <span class="nt">&lt;access</span> <span class="na">origin=</span><span class="s">&quot;http://127.0.0.1*&quot;</span><span class="nt">/&gt;</span> <span class="c">&lt;!-- allow local pages --&gt;</span>
    <span class="c">&lt;!--</span>
<span class="c">        &lt;access origin=&quot;http://phonegap.com&quot; /&gt;                    - allow any secure requests to http://phonegap.com/</span>
<span class="c">        &lt;access origin=&quot;http://phonegap.com&quot; subdomains=&quot;true&quot; /&gt;  - same as above, but including subdomains, such as http://build.phonegap.com/</span>
<span class="c">        &lt;access origin=&quot;http://phonegap.com&quot; browserOnly=&quot;true&quot; /&gt; - only allows http://phonegap.com to be opened by the child browser.</span>
<span class="c">    --&gt;</span>


<span class="nt">&lt;/widget&gt;</span>
</code></pre></div>
<h2 id="ios-플랫폼-추가">iOS 플랫폼 추가</h2>

<p>다음은 iOS용 PhoneGap Plugins을 만들기 위해서 iOS 플랫폼을 추가한다. PhoneGap CLI로 최초 프로젝트를 만들면 어떠한 플랫폼도 설치되지 않는다. PhoneGap CLI의 build를 해야 iOS 자원들이 만들어진다.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">phonegap local build ios
</code></pre></div>
<p>위와 같이 <code>phonegap local build</code>를 실행하면 비어있던 <code>./platforms</code> 디렉토리에 iOS 플랫폼 자원이 만들어진 것을 확인할 수 있다. iOS 플랫폼의 자원중에 iOS 프로젝트 디렉토리를 살펴보자. 우리는 PhoneGap 프로젝트 이름을 <strong>SF-PhoneGap-Plugin-Demo</strong>로 만들었다.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">ls -l ./platforms/ios/SF-PhoneGap-Plugin-Demo
</code></pre></div>
<p><img src="http://cfile1.uf.tistory.com/image/2202B750531FE9852E434B" alt="phonegap ios platform {max-width: 600px;}"></p>

<p><code>./platforms/ios/SF-PhoneGap-Plugin-Demo</code> 라는 디렉토리 안에는 iOS 프로젝트에 사용하는 파일들이 존재하고 <code>Plugins</code>라는 디렉토리가 있는 것을 확인할 수 있다. 현재 아무런 Plugins을 만들지 않았기 때문에 비어있는 상태이다.</p>

<h2 id="xcode를-이용해서-ios-프로젝트-실행">XCode를 이용해서 iOS 프로젝트 실행</h2>

<p>iOS용 Plugins을 만들기 위해서는 <strong>Xcode가</strong> 필요하다. PhoneGap CLI로 local build ios를 이용해서 iOS 플랫폼 자원을 만들면 iOS 코드를 편집할 수 있는 Xcode 프로젝트 파일도 함께 만들어지는데 위치는 <code>./platforms/ios</code> 안에 <code>{PhoneGap 프로젝트 이름}.xcodeproj</code> 파일로 만들어진다.</p>

<p><img src="http://cfile30.uf.tistory.com/image/2714344B531FEA7235F61F" alt="xcode project {max-width:600px;}"></p>

<p><code>./platforms/ios/SF-PhoneGap-Plugin-Demo.xcodeproj</code> 파일을 실행시켜보자. 아래와 같이 <strong>SF-PhoneGap-Plugin-Demo</strong> 프로젝트 안에 <code>CordovaLib.xcodeproj</code> 파일이 포함되어 있는 것을 알 수 있다. 또한 <strong>Build Phases의 Link binary With Libraries</strong>를 살펴보면 <strong>libCordova.a</strong>라는 cordova의 static library가 포함되어 있는 것을 확인할 수 있다. 이러한 이유로 Cordova에서 만든 Class를 우리는 별 다른 설정없이 사용할 수 있다.</p>

<p><img src="http://cfile26.uf.tistory.com/image/2523544B531FEAEA2FA936" alt="xcode build phases {max-width:600px;}"></p>

<p>우리는 이제 PhoneGap 공식 문서의 Echo 기능을 가진 Plugin을 만들어볼 것이다. (참조 : <a href="http://docs.phonegap.com/en/edge/guide_hybrid_plugins_index.md.html#Plugin%20Development%20Guide">http://docs.phonegap.com/en/edge/guide_hybrid_plugins_index.md.html#Plugin%20Development%20Guide</a>) 문서에서는 복잡하게 설명이 되어 있는데 간단하게 원리는 다음과 같다.</p>

<ol>
<li>Xcode에서 iOS에 사용하는 Class를 만든다. 이 때 Cordova의 CDVPlugin을 상속 받아서 만든다.</li>
<li>새롭게 추가한 Class에 method를 추가하고 method를 구현한다.</li>
<li>웹에서 접근할 수 있기 위해서 cordova에서 네이티브 코드에 접근할 수 있는 JavaScript로 웹에서 접근할 수 있는 인터페이스를 만든다. 이때 cordova.exec 함수를 이용해서 접근하는데 &quot;Class이름&quot;, &quot;메소드이름&quot;, &quot;문자열 배열 인자값&quot;으로 접근하여 새롭게 추가한 Class의 method를 실행한다.</li>
</ol>

<p>위의 Plugins 개발 순서를 기억하면서 진행해보자.</p>

<h2 id="cordova의-cdvplugin을-상속받은-class-만들기">Cordova의 CDVPlugin을 상속받은 Class 만들기</h2>

<p><strong>SF-PhoneGap-Plugin-Demo</strong> 안에 있는 <code>Plugins</code> 디렉토리에서 <strong>New File</strong> 을 한다.</p>

<p><img src="http://cfile24.uf.tistory.com/image/22651F3C531FED2A12EB09" alt="New file {max-width: 600px;}"></p>

<p>그리고 <strong>Subclass of</strong> 부분에서 우리는 Cordova의 CDVPlugin을 상속받아서 만들려하기 때문에 <strong>CDVPlugin</strong>을 입력한다. 그리고 새로운 파일의 Class 이름을 입력한다. 우리는 Echo 하는 클래스를 만들 것이기 때문에 편의상 이름을 <strong>SFPluginEcho</strong>라 입력하겠다.</p>

<p><img src="http://cfile21.uf.tistory.com/image/213C1F45531FEDF429888E" alt="New file {max-width: 600px;}"></p>

<p><img src="http://cfile3.uf.tistory.com/image/2404B436531FEE38231744" alt="New file {max-width: 600px;}"></p>

<p>위와 같이 새로운 Class 파일을 Plugins에 만들어 진것을 확인할 수 있다. 우리는 간단히 웹에서 넘겨준 문자열을 iOS 자원인 <strong>UIAlertView</strong>를 이용해서 경고창을 띄우는 것을 에제로 해볼 것이다. 메소드 이름은 echo로 하겠다. <code>SFPluginEcho.h</code>에 다음과 같이 메소들 선언한다.</p>

<p>메소드를 추가하기 전에 CDVPlugin를 상속 받은 <code>SFPluginEcho.h</code> 파일을 살펴보면 <code>#import&lt;Cordova/Cordova.h&gt;</code>에 에러가 발생한 것을 확인할 수 있다. PhoneGap CLI의 버그인지 알수 없지만 Cordova 라이브러리를 추가하여 사용할 때 <code>Cordova/CDV.h</code>를 import 해야하기 때문에 다음과 같이 변경한다.</p>

<p><img src="http://cfile10.uf.tistory.com/image/215CDA37531FF07D23860D" alt="cordova header import {max-width:600px;}"></p>

<p>아래와 같이 <code>Cordova/CDV.h</code>를 import하면 위의 에러가 사라진다. <code>Cordova/CDV.h</code>를 열어서 확인하면 그 안에 <code>CDVPlugin.h</code>를 import하고 있는 것을 확인할 수 있다.</p>

<p><img src="http://cfile29.uf.tistory.com/image/23630941531FF0BE01BDC8" alt="import header {max-width:600px;}"></p>

<p>이제 echo 메소드를 추가하자. 메소드를 추가할 때 이 Class는 웹에서 Cordova가 제공하는 JavaScript 인터페이스로 접근을 할 것이다. 이 때, Cordova 내부에서 지정하기를 <code>CDVInvokedUrlCommand</code> 형태로 넘어오기 때문에 메소드를 추가할 때는 인자값을 <code>CDVInokedUrlCommand</code>를 받을 수 있게 정의 한다.</p>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="c1">//</span>
<span class="c1">//  SFPluginEcho.h</span>
<span class="c1">//  SF-PhoneGap-Plugin-Demo</span>
<span class="c1">//</span>
<span class="c1">//  Created by SungKwang Song on 3/12/14.</span>
<span class="c1">//</span>
<span class="c1">//</span>

<span class="cp">#import &lt;Cordova/CDV.h&gt;</span>

<span class="k">@interface</span> <span class="nc">SFPluginEcho</span> : <span class="nc">CDVPlugin</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">echo:</span><span class="p">(</span><span class="n">CDVInvokedUrlCommand</span><span class="o">*</span><span class="p">)</span><span class="nv">command</span><span class="p">;</span>

<span class="k">@end</span>
</code></pre></div>
<p>이제 <code>SFPluginEcho.m</code> 파일을 열어서 메소드를 구현하자. <code>CDInvokedUrlCommand</code>의 인자중에서 첫번째 문자열을 iOS의 자원인 <code>UIAlerView</code>를 열어서 출력시켜주는 코드를 추가했다.</p>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="c1">//</span>
<span class="c1">//  SFPluginEcho.m</span>
<span class="c1">//  SF-PhoneGap-Plugin-Demo</span>
<span class="c1">//</span>
<span class="c1">//  Created by SungKwang Song on 3/12/14.</span>
<span class="c1">//</span>
<span class="c1">//</span>

<span class="cp">#import &quot;SFPluginEcho.h&quot;</span>

<span class="k">@implementation</span> <span class="nc">SFPluginEcho</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">echo:</span><span class="p">(</span><span class="n">CDVInvokedUrlCommand</span> <span class="o">*</span><span class="p">)</span><span class="nv">command</span>
<span class="p">{</span>
    <span class="bp">NSString</span><span class="o">*</span> <span class="n">message</span> <span class="o">=</span> <span class="p">[</span><span class="n">command</span><span class="p">.</span><span class="n">arguments</span> <span class="nl">objectAtIndex</span><span class="p">:</span><span class="mi">0</span><span class="p">];</span>

    <span class="p">[[[</span><span class="bp">UIAlertView</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithTitle</span><span class="p">:</span><span class="s">@&quot;iOS 알림&quot;</span> <span class="nl">message</span><span class="p">:</span><span class="n">message</span> <span class="nl">delegate</span><span class="p">:</span><span class="nb">nil</span> <span class="nl">cancelButtonTitle</span><span class="p">:</span><span class="s">@&quot;취소&quot;</span> <span class="nl">otherButtonTitles</span><span class="p">:</span><span class="s">@&quot;확인&quot;</span><span class="p">,</span> <span class="nb">nil</span><span class="p">]</span> <span class="n">show</span><span class="p">];</span>
<span class="p">}</span>

<span class="k">@end</span>
</code></pre></div>
<h2 id="웹에서-네이티브-class와-method에-접근할-수-있는-javascript-인터페이스-만들기">웹에서 네이티브 Class와 method에 접근할 수 있는 JavaScript 인터페이스 만들기</h2>

<p>이제 웹에서 이 코드에 접근하기 위해서 JavaScript 코드를 추가할 것이다. <code>./www/js/sf_phonegap_plugin_demo_echo.js</code>를 만들어서 다음과 같이 추가한다. Cordova 인터페이스는 다음과 같이 <code>cordova.exec()</code>로 네이티브 class와 method에 접근할 수 있는 방법을 제공한다. 우리는 위에서 네이티브 class 이름을 <strong>SFPluginEcho</strong>라고 지정했고 method 이름을 <code>echo</code>라고 지정했다. <code>cordova.exec()</code>는 인자값은 다음과 같다.</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">cordova</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="err">성공후</span> <span class="err">실행될</span> <span class="err">콜백함수</span><span class="p">,</span> <span class="err">실패후</span> <span class="err">실행될</span> <span class="err">콜백함수</span><span class="p">,</span> <span class="err">서비스</span><span class="p">,</span> <span class="err">액션</span><span class="p">,</span> <span class="err">인자값배열</span><span class="p">);</span>
</code></pre></div>
<p>간단한 예제를 위해서 콜백함수를 null로 입력하고 인자값은 하나만 입력 받기 위해서 다음과 같이 했다.</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">//</span>
<span class="c1">//  sf_phonegap_plugin_demo_echo.js</span>
<span class="c1">//</span>
<span class="c1">//  Created by SungKwang Song on 3/12/14.</span>
<span class="c1">//</span>
<span class="c1">//</span>


<span class="kd">function</span> <span class="nx">SFPluginEcho</span><span class="p">(){}</span>

<span class="nx">SFPluginEcho</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">echo</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">message</span><span class="p">){</span>
  <span class="nx">cordova</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="s2">&quot;SFPluginEcho&quot;</span><span class="p">,</span> <span class="s2">&quot;echo&quot;</span><span class="p">,</span> <span class="p">[</span><span class="nx">message</span><span class="p">]);</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="index.html-에-javascript-인터페이스-로드">index.html 에 JavaScript 인터페이스 로드</h2>

<p>위의 생성한 JavaScript를 로드해서 사용하기 위해서 <code>./www/index.html</code> 페이지를 다음과 같이 수정한다. 위에서 만든 <code>sf_phonegap_plugin_demo_echo.js</code>를 로드시키고 모든 자원이 로드 되고 나면 <code>runEcho</code> 함수를 실행시킨다. 이때 위에서 JavaScript 인터페이스에서 우리가 정의한 <strong>SFPluginEcho</strong> 오브젝트와 message를 인자로 받는 echo 함수를 <strong>SFPluginEcho</strong> 오브젝트에 연결해두었다. <code>runEcho</code>는 <strong>SFPluginEcho</strong> 오브젝트를 새로운 인스턴스로 만들고 정의한 <code>echo</code>를 message를 입력받아서 호출하게 한다.</p>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="c">&lt;!--</span>
<span class="c">    Licensed to the Apache Software Foundation (ASF) under one</span>
<span class="c">    or more contributor license agreements.  See the NOTICE file</span>
<span class="c">    distributed with this work for additional information</span>
<span class="c">    regarding copyright ownership.  The ASF licenses this file</span>
<span class="c">    to you under the Apache License, Version 2.0 (the</span>
<span class="c">    &quot;License&quot;); you may not use this file except in compliance</span>
<span class="c">    with the License.  You may obtain a copy of the License at</span>

<span class="c">    http://www.apache.org/licenses/LICENSE-2.0</span>

<span class="c">    Unless required by applicable law or agreed to in writing,</span>
<span class="c">    software distributed under the License is distributed on an</span>
<span class="c">    &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY</span>
<span class="c">     KIND, either express or implied.  See the License for the</span>
<span class="c">    specific language governing permissions and limitations</span>
<span class="c">    under the License.</span>
<span class="c">--&gt;</span>
<span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">&quot;utf-8&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">&quot;format-detection&quot;</span> <span class="na">content=</span><span class="s">&quot;telephone=no&quot;</span> <span class="nt">/&gt;</span>
        <span class="c">&lt;!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 --&gt;</span>
        <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">&quot;viewport&quot;</span> <span class="na">content=</span><span class="s">&quot;user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span> <span class="na">href=</span><span class="s">&quot;css/index.css&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;title&gt;</span>Hello World<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;app&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;h1&gt;</span>PhoneGap<span class="nt">&lt;/h1&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;deviceready&quot;</span> <span class="na">class=</span><span class="s">&quot;blink&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">&quot;event listening&quot;</span><span class="nt">&gt;</span>Connecting to Device<span class="nt">&lt;/p&gt;</span>
                <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">&quot;event received&quot;</span><span class="nt">&gt;</span>Device is Ready<span class="nt">&lt;/p&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;phonegap.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
        <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;js/sf_phonegap_plugin_demo_echo.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
        <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;</span>

            <span class="kd">var</span> <span class="nx">runEcho</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
              <span class="kd">var</span> <span class="nx">pluginEcho</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SFPluginEcho</span><span class="p">();</span>
              <span class="nx">pluginEcho</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="s2">&quot;웹에서 보낸 메세지를 UIAlertView를 이용해서 보기&quot;</span><span class="p">);</span>
            <span class="p">};</span>


            <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;deviceready&#39;</span><span class="p">,</span> <span class="nx">runEcho</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
        <span class="nt">&lt;/script&gt;</span>
    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div>
<p>이제 웹과 네이티브 자원이 함께 사용할 준비를 모두 마쳤다. PhoneGap CLI로 빌드해서 실행해보자.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">phonegap local build ios
</code></pre></div><div class="highlight"><pre><code class="language-text" data-lang="text">phonegap local install ios
</code></pre></div>
<p><img src="http://cfile30.uf.tistory.com/image/2638433753201106120031" alt="ios simulator {max-width:320px;}"></p>

<h2 id="cdvpluginresult를-이용해서-네이티브의-데이터를-javascript에-넘겨서-사용하기">CDVPluginResult를 이용해서 네이티브의 데이터를 JavaScript에 넘겨서 사용하기</h2>

<p>이젠 네이티브 코드에서 JavaScript로 데이터를 넘기는 것을 확인해보자. 위에서 구현한 echo 메소드는 단순하게 웹에서 문자열을 넘겨서 네이티브 자원인 <code>UIAlertView</code>를 열어서 문자열을 출력하기로 한 예제였다면, 이번 예제는 네이티브 코드에서 가져온 문자열을 웹으로 넘겨서 웹에서 문자열을 출력하게하기 위한 예제이다.</p>

<p><code>SFPluginEcho.h</code> 파일을 열어서 다음과 <code>getMessage</code> 메소드를 추가한다.</p>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="c1">//</span>
<span class="c1">//  SFPluginEcho.h</span>
<span class="c1">//  SF-PhoneGap-Plugin-Demo</span>
<span class="c1">//</span>
<span class="c1">//  Created by SungKwang Song on 3/12/14.</span>
<span class="c1">//</span>
<span class="c1">//</span>

<span class="cp">#import &lt;Cordova/CDV.h&gt;</span>

<span class="k">@interface</span> <span class="nc">SFPluginEcho</span> : <span class="nc">CDVPlugin</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">echo:</span><span class="p">(</span><span class="n">CDVInvokedUrlCommand</span> <span class="o">*</span><span class="p">)</span><span class="nv">command</span><span class="p">;</span>
<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">getMessage:</span><span class="p">(</span><span class="n">CDVInvokedUrlCommand</span> <span class="o">*</span><span class="p">)</span><span class="nv">command</span><span class="p">;</span>
<span class="k">@end</span>
</code></pre></div>
<p><code>SFPluginEcho.m</code> 파일을 열어서 <code>getMessage</code> 메소드를 구현한다. 네이티브코드에서 <code>NSDictionary</code> 타입으로 오브젝트를 만들어서 <code>CDPluginResult</code>에 <code>messageAsDictionary</code>에 <code>NSDictionary</code> 데이터를 넘겨서 <code>commandDelete</code>의 <code>sendPluginResult</code>로 넘겨주게되면 웹에서 callbackSuccess 함수에서 result 인자값에 json 오브젝트로 받을 수 있게 된다.</p>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="c1">//</span>
<span class="c1">//  SFPluginEcho.m</span>
<span class="c1">//  SF-PhoneGap-Plugin-Demo</span>
<span class="c1">//</span>
<span class="c1">//  Created by SungKwang Song on 3/12/14.</span>
<span class="c1">//</span>
<span class="c1">//</span>

<span class="cp">#import &quot;SFPluginEcho.h&quot;</span>

<span class="k">@implementation</span> <span class="nc">SFPluginEcho</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">echo:</span><span class="p">(</span><span class="n">CDVInvokedUrlCommand</span> <span class="o">*</span><span class="p">)</span><span class="nv">command</span>
<span class="p">{</span>
    <span class="bp">NSString</span><span class="o">*</span> <span class="n">message</span> <span class="o">=</span> <span class="p">[</span><span class="n">command</span><span class="p">.</span><span class="n">arguments</span> <span class="nl">objectAtIndex</span><span class="p">:</span><span class="mi">0</span><span class="p">];</span>
    <span class="p">[[[</span><span class="bp">UIAlertView</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithTitle</span><span class="p">:</span><span class="s">@&quot;iOS 알림&quot;</span> <span class="nl">message</span><span class="p">:</span><span class="n">message</span> <span class="nl">delegate</span><span class="p">:</span><span class="nb">nil</span> <span class="nl">cancelButtonTitle</span><span class="p">:</span><span class="s">@&quot;취소&quot;</span> <span class="nl">otherButtonTitles</span><span class="p">:</span><span class="s">@&quot;확인&quot;</span><span class="p">,</span> <span class="nb">nil</span><span class="p">]</span> <span class="n">show</span><span class="p">];</span>
<span class="p">}</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">getMessage:</span><span class="p">(</span><span class="n">CDVInvokedUrlCommand</span> <span class="o">*</span><span class="p">)</span><span class="nv">command</span>
<span class="p">{</span>

    <span class="p">[</span><span class="nb">self</span><span class="p">.</span><span class="n">commandDelegate</span> <span class="nl">runInBackground</span><span class="p">:</span><span class="o">^</span><span class="p">{</span>

        <span class="bp">NSDictionary</span> <span class="o">*</span><span class="n">jsonInfo</span> <span class="o">=</span> <span class="l">@{</span><span class="s">@&quot;name&quot;</span><span class="o">:</span> <span class="s">@&quot;iOS에서 만든 메세지&quot;</span><span class="l">}</span><span class="p">;</span>

        <span class="n">CDVPluginResult</span> <span class="o">*</span><span class="n">pluginResult</span> <span class="o">=</span> <span class="p">[</span><span class="n">CDVPluginResult</span> <span class="nl">resultWithStatus</span><span class="p">:</span><span class="n">CDVCommandStatus_OK</span> <span class="nl">messageAsDictionary</span><span class="p">:</span> <span class="n">jsonInfo</span><span class="p">];</span>

        <span class="p">[</span><span class="nb">self</span><span class="p">.</span><span class="n">commandDelegate</span> <span class="nl">sendPluginResult</span><span class="p">:</span><span class="n">pluginResult</span> <span class="nl">callbackId</span><span class="p">:</span><span class="n">command</span><span class="p">.</span><span class="n">callbackId</span><span class="p">];</span>
    <span class="p">}];</span>

<span class="p">}</span>
<span class="k">@end</span>
</code></pre></div>
<p>다음은 <code>sf_phonegap_plugin_demo_echo.js</code>를 열어서 <code>getMessage</code>를 prototype으로 추가한다.</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">//</span>
<span class="c1">//  sf_phonegap_plugin_echo.js</span>
<span class="c1">//</span>
<span class="c1">//  Created by SungKwang Song on 3/12/14.</span>
<span class="c1">//</span>
<span class="c1">//</span>


<span class="kd">function</span> <span class="nx">SFPluginEcho</span><span class="p">()</span> <span class="p">{}</span>
<span class="nx">SFPluginEcho</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">echo</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span> <span class="p">{</span>

  <span class="nx">cordova</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="s2">&quot;SFPluginEcho&quot;</span><span class="p">,</span> <span class="s2">&quot;echo&quot;</span><span class="p">,</span> <span class="p">[</span><span class="nx">message</span><span class="p">]);</span>
<span class="p">};</span>


<span class="nx">SFPluginEcho</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getMessage</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="kd">var</span> <span class="nx">callbackSuccess</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">result</span><span class="p">){</span>
    <span class="nx">alert</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="kd">var</span> <span class="nx">callbackFail</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">){</span>
    <span class="nx">alert</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="nx">cordova</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">callbackSuccess</span><span class="p">,</span> <span class="nx">callbackFail</span><span class="p">,</span> <span class="s2">&quot;SFPluginEcho&quot;</span><span class="p">,</span> <span class="s2">&quot;getMessage&quot;</span><span class="p">,</span> <span class="p">[]);</span>

<span class="p">}</span>
</code></pre></div>
<p>마지막으로 <code>sf_plugin_demo_echo.js</code>를 로드하는 <code>index.html</code>을 열어서 다음과 같이 수정한다.</p>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="c">&lt;!--</span>
<span class="c">    Licensed to the Apache Software Foundation (ASF) under one</span>
<span class="c">    or more contributor license agreements.  See the NOTICE file</span>
<span class="c">    distributed with this work for additional information</span>
<span class="c">    regarding copyright ownership.  The ASF licenses this file</span>
<span class="c">    to you under the Apache License, Version 2.0 (the</span>
<span class="c">    &quot;License&quot;); you may not use this file except in compliance</span>
<span class="c">    with the License.  You may obtain a copy of the License at</span>

<span class="c">    http://www.apache.org/licenses/LICENSE-2.0</span>

<span class="c">    Unless required by applicable law or agreed to in writing,</span>
<span class="c">    software distributed under the License is distributed on an</span>
<span class="c">    &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY</span>
<span class="c">     KIND, either express or implied.  See the License for the</span>
<span class="c">    specific language governing permissions and limitations</span>
<span class="c">    under the License.</span>
<span class="c">--&gt;</span>
<span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">&quot;utf-8&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">&quot;format-detection&quot;</span> <span class="na">content=</span><span class="s">&quot;telephone=no&quot;</span> <span class="nt">/&gt;</span>
        <span class="c">&lt;!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 --&gt;</span>
        <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">&quot;viewport&quot;</span> <span class="na">content=</span><span class="s">&quot;user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span> <span class="na">href=</span><span class="s">&quot;css/index.css&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;title&gt;</span>Hello World<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;app&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;h1&gt;</span>PhoneGap<span class="nt">&lt;/h1&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;deviceready&quot;</span> <span class="na">class=</span><span class="s">&quot;blink&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">&quot;event listening&quot;</span><span class="nt">&gt;</span>Connecting to Device<span class="nt">&lt;/p&gt;</span>
                <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">&quot;event received&quot;</span><span class="nt">&gt;</span>Device is Ready<span class="nt">&lt;/p&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;phonegap.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
        <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;js/sf_phonegap_plugin_demo_echo.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
        <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;</span>

        <span class="kd">function</span> <span class="nx">runEcho</span><span class="p">()</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">pluginEcho</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SFPluginEcho</span><span class="p">();</span>
          <span class="c1">// pluginEcho.echo(&quot;웹에서 보낸 메세지를 UIAlertView를 이용해서 보기&quot;);</span>
          <span class="nx">pluginEcho</span><span class="p">.</span><span class="nx">getMessage</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;deviceready&#39;</span><span class="p">,</span> <span class="nx">runEcho</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>

        <span class="nt">&lt;/script&gt;</span>
    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div>
<p>PhoneGap CLI로 build하고 install을 해보자.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">phonegap local build ios
</code></pre></div><div class="highlight"><pre><code class="language-text" data-lang="text">phonegap local install ios
</code></pre></div>
<p><img src="http://cfile25.uf.tistory.com/image/251BA73A53268C1434CACE" alt="ios simulator {max-width:320px;}"></p>

<p>위와 같이 네이티브 코드에서 <code>CDVPluginResult</code>에 값을 Dictionary 넘겨서 JavaScript의 callback에서 JSON 값을 받아서 출력할 수 있다.</p>

<h2 id="네이티브-코드에서-javascript-함수를-호출하기">네이티브 코드에서 JavaScript 함수를 호출하기</h2>

<p>위의 예제는 네이티브에서 처리한 결과를 <strong>CDVPluginResult</strong>를 이용하여 <code>cordova.exec()</code>를 실행할 때 넘겨받는 callbackSuccess에 값을 넘겨서 사용하는 예제였다. 하지만 하이브리드 앱은 네이티브 코드에서 JavaScript 함수를 호출하여 사용하는 경우도 필요하다. 즉, <code>cordova.exec()</code>로 처리후 callback을 사용하는 것이 아니라 네이티브 코드 자체에서 JavaScript를 호출할 수 있어야하기 때문이다. 이렇게 네이티브코드에서 JavaScript를 호출하는 방법은 두가지로 처리할 수 있다.</p>

<ol>
<li><code>[self.webView stringByEvaluatingJavaScriptFromString:]</code> 을 이용하는 방법이다. PhoneGap으로 프로젝트를 생성하여 Plugins을 만들 때 <strong>CDVPlugin</strong> 객체를 상속받아서 만들게 되는데 이때 CDVPlugin은 하이브리드 앱을 만들기 위해서 <strong>UIWebView</strong>를 참조하고 있기 때문에 <code>self.webview</code>로 UIWebView에 접근할 수 있다.</li>
<li><code>[self.commandDelegate evalJs:]</code> 를 이용하는 방법이다. PhoneGap 프로젝트의 Plugins을 만들때 <strong>CDVPlugin</strong> 객체를 상속받아서 만들게 되는데 이 때 CDVPlugin 안에 JavaScript와 브릿지 역활을 하는 <code>commandDelegate</code>에 <code>evalJs</code>로 스트링타입으로 JavaScript를 호출할 수 있다.</li>
</ol>

<p>이 두가지를 모두 확인해보자.</p>

<h3 id="[self.webview-stringbyevaluatingjavascriptfromstring:]-을-이용해서-네이티브-코드에서-javascript-함수-호출하기">[self.webView stringByEvaluatingJavaScriptFromString:] 을 이용해서 네이티브 코드에서 JavaScript 함수 호출하기</h3>

<p>먼저 <code>SFPluginEcho.h</code>를 열어서 다음 코드를 추가한다.</p>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="c1">//</span>
<span class="c1">//  SFPluginEcho.h</span>
<span class="c1">//  SF-PhoneGap-Plugin-Demo</span>
<span class="c1">//</span>
<span class="c1">//  Created by SungKwang Song on 3/12/14.</span>
<span class="c1">//</span>
<span class="c1">//</span>

<span class="cp">#import &lt;Cordova/CDV.h&gt;</span>

<span class="k">@interface</span> <span class="nc">SFPluginEcho</span> : <span class="nc">CDVPlugin</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">echo:</span><span class="p">(</span><span class="n">CDVInvokedUrlCommand</span> <span class="o">*</span><span class="p">)</span><span class="nv">command</span><span class="p">;</span>
<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">getMessage:</span><span class="p">(</span><span class="n">CDVInvokedUrlCommand</span> <span class="o">*</span><span class="p">)</span><span class="nv">command</span><span class="p">;</span>
<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">runJavasScriptFuncion:</span><span class="p">(</span><span class="n">CDVInvokedUrlCommand</span> <span class="o">*</span><span class="p">)</span><span class="nv">command</span><span class="p">;</span>
<span class="k">@end</span>
</code></pre></div>
<p>다음은 <code>SFPluginEcho.m</code> 을 열어서 위에서 선언한 <code>runJavaScriptFunction</code>을 구현한다. <code>[self.webView stringByEvaulationgJavaScriptFromString:]</code>을 이용할 경우 JavaScript 함수를 호출할 때 무조건 String 으로 호출할 수 있다. 이때 JSON과 같은 파라미터를 넘기기 위해서는 NSDictionary를 String 타입으로 변경해서 넘겨줘야한다.</p>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="c1">//</span>
<span class="c1">//  SFPluginEcho.m</span>
<span class="c1">//  SF-PhoneGap-Plugin-Demo</span>
<span class="c1">//</span>
<span class="c1">//  Created by SungKwang Song on 3/12/14.</span>
<span class="c1">//</span>
<span class="c1">//</span>

<span class="cp">#import &quot;SFPluginEcho.h&quot;</span>

<span class="k">@implementation</span> <span class="nc">SFPluginEcho</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">echo:</span><span class="p">(</span><span class="n">CDVInvokedUrlCommand</span> <span class="o">*</span><span class="p">)</span><span class="nv">command</span>
<span class="p">{</span>
    <span class="bp">NSString</span><span class="o">*</span> <span class="n">message</span> <span class="o">=</span> <span class="p">[</span><span class="n">command</span><span class="p">.</span><span class="n">arguments</span> <span class="nl">objectAtIndex</span><span class="p">:</span><span class="mi">0</span><span class="p">];</span>
    <span class="p">[[[</span><span class="bp">UIAlertView</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithTitle</span><span class="p">:</span><span class="s">@&quot;iOS 알림&quot;</span> <span class="nl">message</span><span class="p">:</span><span class="n">message</span> <span class="nl">delegate</span><span class="p">:</span><span class="nb">nil</span> <span class="nl">cancelButtonTitle</span><span class="p">:</span><span class="s">@&quot;취소&quot;</span> <span class="nl">otherButtonTitles</span><span class="p">:</span><span class="s">@&quot;확인&quot;</span><span class="p">,</span> <span class="nb">nil</span><span class="p">]</span> <span class="n">show</span><span class="p">];</span>
<span class="p">}</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">getMessage:</span><span class="p">(</span><span class="n">CDVInvokedUrlCommand</span> <span class="o">*</span><span class="p">)</span><span class="nv">command</span>
<span class="p">{</span>

    <span class="p">[</span><span class="nb">self</span><span class="p">.</span><span class="n">commandDelegate</span> <span class="nl">runInBackground</span><span class="p">:</span><span class="o">^</span><span class="p">{</span>

        <span class="bp">NSDictionary</span> <span class="o">*</span><span class="n">jsonInfo</span> <span class="o">=</span> <span class="l">@{</span><span class="s">@&quot;name&quot;</span><span class="o">:</span> <span class="s">@&quot;iOS에서 만든 메세지&quot;</span><span class="l">}</span><span class="p">;</span>

        <span class="n">CDVPluginResult</span> <span class="o">*</span><span class="n">pluginResult</span> <span class="o">=</span> <span class="p">[</span><span class="n">CDVPluginResult</span> <span class="nl">resultWithStatus</span><span class="p">:</span><span class="n">CDVCommandStatus_OK</span> <span class="nl">messageAsDictionary</span><span class="p">:</span> <span class="n">jsonInfo</span><span class="p">];</span>

        <span class="p">[</span><span class="nb">self</span><span class="p">.</span><span class="n">commandDelegate</span> <span class="nl">sendPluginResult</span><span class="p">:</span><span class="n">pluginResult</span> <span class="nl">callbackId</span><span class="p">:</span><span class="n">command</span><span class="p">.</span><span class="n">callbackId</span><span class="p">];</span>
    <span class="p">}];</span>

<span class="p">}</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">runJavasScriptFuncion:</span><span class="p">(</span><span class="n">CDVInvokedUrlCommand</span> <span class="o">*</span><span class="p">)</span><span class="nv">command</span>
<span class="p">{</span>
    <span class="bp">NSDictionary</span> <span class="o">*</span><span class="n">jsonInfo</span> <span class="o">=</span> <span class="l">@{</span><span class="s">@&quot;name&quot;</span><span class="o">:</span> <span class="s">@&quot;iOS에서 자바스크립트 실행&quot;</span><span class="l">}</span><span class="p">;</span>

    <span class="bp">NSError</span> <span class="o">*</span><span class="n">error</span><span class="p">;</span>
    <span class="bp">NSData</span> <span class="o">*</span><span class="n">jsonData</span> <span class="o">=</span> <span class="p">[</span><span class="bp">NSJSONSerialization</span> <span class="nl">dataWithJSONObject</span><span class="p">:</span><span class="n">jsonInfo</span> <span class="nl">options</span><span class="p">:</span><span class="n">NSJSONWritingPrettyPrinted</span> <span class="nl">error</span><span class="p">:</span><span class="o">&amp;</span><span class="n">error</span><span class="p">];</span>
    <span class="n">CDVPluginResult</span> <span class="o">*</span><span class="n">pluginResult</span> <span class="o">=</span> <span class="nb">nil</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="bp">NSString</span> <span class="o">*</span><span class="n">jsonString</span> <span class="o">=</span> <span class="p">[[</span><span class="bp">NSString</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithData</span><span class="p">:</span><span class="n">jsonData</span> <span class="nl">encoding</span><span class="p">:</span><span class="n">NSUTF8StringEncoding</span><span class="p">];</span>
        <span class="bp">NSString</span> <span class="o">*</span><span class="n">javaScriptString</span> <span class="o">=</span> <span class="p">[</span><span class="bp">NSString</span> <span class="nl">stringWithFormat</span><span class="p">:</span><span class="s">@&quot;print_message(%@)&quot;</span><span class="p">,</span> <span class="n">jsonString</span><span class="p">];</span>

        <span class="p">[</span><span class="nb">self</span><span class="p">.</span><span class="n">webView</span> <span class="nl">stringByEvaluatingJavaScriptFromString</span><span class="p">:</span><span class="n">javaScriptString</span><span class="p">];</span>

        <span class="n">pluginResult</span> <span class="o">=</span> <span class="p">[</span><span class="n">CDVPluginResult</span> <span class="nl">resultWithStatus</span><span class="p">:</span><span class="n">CDVCommandStatus_OK</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="n">pluginResult</span> <span class="o">=</span> <span class="p">[</span><span class="n">CDVPluginResult</span> <span class="nl">resultWithStatus</span><span class="p">:</span><span class="n">CDVCommandStatus_ERROR</span> <span class="nl">messageAsString</span><span class="p">:[</span><span class="n">error</span> <span class="n">localizedDescription</span><span class="p">]];</span>
    <span class="p">}</span>

    <span class="p">[</span><span class="nb">self</span><span class="p">.</span><span class="n">commandDelegate</span> <span class="nl">sendPluginResult</span><span class="p">:</span><span class="n">pluginResult</span> <span class="nl">callbackId</span><span class="p">:</span><span class="n">command</span><span class="p">.</span><span class="n">callbackId</span><span class="p">];</span>

<span class="p">}</span>

<span class="k">@end</span>
</code></pre></div>
<p>다음은 <code>sf_phonegap_plugin_demo_echo.js</code>에 다음 코드를 추가한다.</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">//</span>
<span class="c1">//  sf_phonegap_plugin_echo.js</span>
<span class="c1">//</span>
<span class="c1">//  Created by SungKwang Song on 3/12/14.</span>
<span class="c1">//</span>
<span class="c1">//</span>


<span class="kd">function</span> <span class="nx">SFPluginEcho</span><span class="p">()</span> <span class="p">{}</span>
<span class="nx">SFPluginEcho</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">echo</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span> <span class="p">{</span>

  <span class="nx">cordova</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="s2">&quot;SFPluginEcho&quot;</span><span class="p">,</span> <span class="s2">&quot;echo&quot;</span><span class="p">,</span> <span class="p">[</span><span class="nx">message</span><span class="p">]);</span>
<span class="p">};</span>


<span class="nx">SFPluginEcho</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getMessage</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="kd">var</span> <span class="nx">callbackSuccess</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">result</span><span class="p">){</span>
    <span class="nx">alert</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="kd">var</span> <span class="nx">callbackFail</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">){</span>
    <span class="nx">alert</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="nx">cordova</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">callbackSuccess</span><span class="p">,</span> <span class="nx">callbackFail</span><span class="p">,</span> <span class="s2">&quot;SFPluginEcho&quot;</span><span class="p">,</span> <span class="s2">&quot;getMessage&quot;</span><span class="p">,</span> <span class="p">[]);</span>

<span class="p">}</span>

<span class="nx">SFPluginEcho</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">runJavaScript</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="kd">var</span> <span class="nx">callbackFail</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">){</span>
    <span class="nx">alert</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="nx">cordova</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">callbackFail</span><span class="p">,</span> <span class="s2">&quot;SFPluginEcho&quot;</span><span class="p">,</span> <span class="s2">&quot;runJavasScriptFuncion&quot;</span><span class="p">,</span> <span class="p">[]);</span>

<span class="p">}</span>

<span class="kd">function</span> <span class="nx">print_message</span><span class="p">(</span><span class="nx">result</span><span class="p">){</span>
  <span class="nx">alert</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>마지막으로 <code>sf_phonegap_plugin_echo.js</code>를 로드하는 <code>index.html</code>을 수정한다.</p>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="c">&lt;!--</span>
<span class="c">    Licensed to the Apache Software Foundation (ASF) under one</span>
<span class="c">    or more contributor license agreements.  See the NOTICE file</span>
<span class="c">    distributed with this work for additional information</span>
<span class="c">    regarding copyright ownership.  The ASF licenses this file</span>
<span class="c">    to you under the Apache License, Version 2.0 (the</span>
<span class="c">    &quot;License&quot;); you may not use this file except in compliance</span>
<span class="c">    with the License.  You may obtain a copy of the License at</span>

<span class="c">    http://www.apache.org/licenses/LICENSE-2.0</span>

<span class="c">    Unless required by applicable law or agreed to in writing,</span>
<span class="c">    software distributed under the License is distributed on an</span>
<span class="c">    &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY</span>
<span class="c">     KIND, either express or implied.  See the License for the</span>
<span class="c">    specific language governing permissions and limitations</span>
<span class="c">    under the License.</span>
<span class="c">--&gt;</span>
<span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">&quot;utf-8&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">&quot;format-detection&quot;</span> <span class="na">content=</span><span class="s">&quot;telephone=no&quot;</span> <span class="nt">/&gt;</span>
        <span class="c">&lt;!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 --&gt;</span>
        <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">&quot;viewport&quot;</span> <span class="na">content=</span><span class="s">&quot;user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span> <span class="na">href=</span><span class="s">&quot;css/index.css&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;title&gt;</span>Hello World<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;app&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;h1&gt;</span>PhoneGap<span class="nt">&lt;/h1&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;deviceready&quot;</span> <span class="na">class=</span><span class="s">&quot;blink&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">&quot;event listening&quot;</span><span class="nt">&gt;</span>Connecting to Device<span class="nt">&lt;/p&gt;</span>
                <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">&quot;event received&quot;</span><span class="nt">&gt;</span>Device is Ready<span class="nt">&lt;/p&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;phonegap.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
        <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;js/sf_phonegap_plugin_demo_echo.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
        <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;</span>

        function runEcho() {
          var pluginEcho = new SFPluginEcho();
          // pluginEcho.echo(&quot;웹에서 보낸 메세지를 UIAlertView를 이용해서 보기&quot;);
          // pluginEcho.getMessage();
          pluginEcho.runJavaScript();
        }

        document.addEventListener(&#39;deviceready&#39;, runEcho, false)
        ... 생략 ...
</code></pre></div>
<p>PhoneGap CLI로 build하고 install을 해보자.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">phonegap local build ios
</code></pre></div><div class="highlight"><pre><code class="language-text" data-lang="text">phonegap local install ios
</code></pre></div>
<p><img src="http://cfile4.uf.tistory.com/image/231DFD3E5326A9561A50B5" alt="ios simulator {max-width:320px;}"></p>

<p>위와 같이 iOS 네이티브 코드에서 JavaScript의 <code>print_message()</code> 함수를 호출한 것을 확인할 수 있다.</p>

<h3 id="[self.commanddelegate-evaljs:]-로-네이티브에서-javascript-함수-호출하기">[self.commandDelegate evalJs:] 로 네이티브에서 JavaScript 함수 호출하기</h3>

<p>젠 PhoneGap에서 지원하는 <code>self.commandDelegate</code>의 <strong>evalJs</strong>를 이용해서 네이티브코드에서 JavaScript를 실행해보자.
<code>SFPluginEcho.m</code>을 열어서 다음과 같이 코드를 수정하자. 방법은 간단하다. <code>[self.webView stringByEvaluatingJavaScriptFromString:]</code>을 <code>[self.commandDelegate evalJs:]</code>로 변경만 하면 된다. 위의 예제는 동기 방식이고 아래는 <code>[self.commandDelegate runInBackground:]</code> 안에서 비동기 방식으로 실행하게 한것 외에는 동일하다.</p>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="c1">//</span>
<span class="c1">//  SFPluginEcho.m</span>
<span class="c1">//  SF-PhoneGap-Plugin-Demo</span>
<span class="c1">//</span>
<span class="c1">//  Created by SungKwang Song on 3/12/14.</span>
<span class="c1">//</span>
<span class="c1">//</span>

<span class="cp">#import &quot;SFPluginEcho.h&quot;</span>

<span class="k">@implementation</span> <span class="nc">SFPluginEcho</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">echo:</span><span class="p">(</span><span class="n">CDVInvokedUrlCommand</span> <span class="o">*</span><span class="p">)</span><span class="nv">command</span>
<span class="p">{</span>
    <span class="bp">NSString</span><span class="o">*</span> <span class="n">message</span> <span class="o">=</span> <span class="p">[</span><span class="n">command</span><span class="p">.</span><span class="n">arguments</span> <span class="nl">objectAtIndex</span><span class="p">:</span><span class="mi">0</span><span class="p">];</span>
    <span class="p">[[[</span><span class="bp">UIAlertView</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithTitle</span><span class="p">:</span><span class="s">@&quot;iOS 알림&quot;</span> <span class="nl">message</span><span class="p">:</span><span class="n">message</span> <span class="nl">delegate</span><span class="p">:</span><span class="nb">nil</span> <span class="nl">cancelButtonTitle</span><span class="p">:</span><span class="s">@&quot;취소&quot;</span> <span class="nl">otherButtonTitles</span><span class="p">:</span><span class="s">@&quot;확인&quot;</span><span class="p">,</span> <span class="nb">nil</span><span class="p">]</span> <span class="n">show</span><span class="p">];</span>
<span class="p">}</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">getMessage:</span><span class="p">(</span><span class="n">CDVInvokedUrlCommand</span> <span class="o">*</span><span class="p">)</span><span class="nv">command</span>
<span class="p">{</span>

    <span class="p">[</span><span class="nb">self</span><span class="p">.</span><span class="n">commandDelegate</span> <span class="nl">runInBackground</span><span class="p">:</span><span class="o">^</span><span class="p">{</span>

        <span class="bp">NSDictionary</span> <span class="o">*</span><span class="n">jsonInfo</span> <span class="o">=</span> <span class="l">@{</span><span class="s">@&quot;name&quot;</span><span class="o">:</span> <span class="s">@&quot;iOS에서 만든 메세지&quot;</span><span class="l">}</span><span class="p">;</span>

        <span class="n">CDVPluginResult</span> <span class="o">*</span><span class="n">pluginResult</span> <span class="o">=</span> <span class="p">[</span><span class="n">CDVPluginResult</span> <span class="nl">resultWithStatus</span><span class="p">:</span><span class="n">CDVCommandStatus_OK</span> <span class="nl">messageAsDictionary</span><span class="p">:</span> <span class="n">jsonInfo</span><span class="p">];</span>

        <span class="p">[</span><span class="nb">self</span><span class="p">.</span><span class="n">commandDelegate</span> <span class="nl">sendPluginResult</span><span class="p">:</span><span class="n">pluginResult</span> <span class="nl">callbackId</span><span class="p">:</span><span class="n">command</span><span class="p">.</span><span class="n">callbackId</span><span class="p">];</span>
    <span class="p">}];</span>

<span class="p">}</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">runJavasScriptFuncion:</span><span class="p">(</span><span class="n">CDVInvokedUrlCommand</span> <span class="o">*</span><span class="p">)</span><span class="nv">command</span>
<span class="p">{</span>
<span class="c1">//    NSDictionary *jsonInfo = @{@&quot;name&quot;: @&quot;iOS에서 자바스크립트 print_message 실행&quot;};</span>
<span class="c1">//</span>
<span class="c1">//    NSError *error;</span>
<span class="c1">//    NSData *jsonData = [NSJSONSerialization dataWithJSONObject:jsonInfo options:NSJSONWritingPrettyPrinted error:&amp;error];</span>
<span class="c1">//</span>
<span class="c1">//    CDVPluginResult *pluginResult = nil;</span>
<span class="c1">//</span>
<span class="c1">//    if (!error) {</span>
<span class="c1">//        NSString *jsonString = [[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding];</span>
<span class="c1">//        NSString *javaScriptString = [NSString stringWithFormat:@&quot;print_message(%@)&quot;, jsonString];</span>
<span class="c1">//        [self.webView stringByEvaluatingJavaScriptFromString:javaScriptString];</span>
<span class="c1">//</span>
<span class="c1">//        pluginResult = [CDVPluginResult resultWithStatus:CDVCommandStatus_OK];</span>
<span class="c1">//    } else {</span>
<span class="c1">//        pluginResult = [CDVPluginResult resultWithStatus:CDVCommandStatus_ERROR messageAsString:[error localizedDescription]];</span>
<span class="c1">//    }</span>
<span class="c1">//</span>
<span class="c1">//    [self.commandDelegate sendPluginResult:pluginResult callbackId:command.callbackId];</span>

    <span class="p">[</span><span class="nb">self</span><span class="p">.</span><span class="n">commandDelegate</span> <span class="nl">runInBackground</span><span class="p">:</span><span class="o">^</span><span class="p">{</span>
        <span class="bp">NSDictionary</span> <span class="o">*</span><span class="n">jsonInfo</span> <span class="o">=</span> <span class="l">@{</span><span class="s">@&quot;name&quot;</span><span class="o">:</span> <span class="s">@&quot;iOS에서 자바스크립트 print_message 실행&quot;</span><span class="l">}</span><span class="p">;</span>

        <span class="bp">NSError</span> <span class="o">*</span><span class="n">error</span><span class="p">;</span>
        <span class="bp">NSData</span> <span class="o">*</span><span class="n">jsonData</span> <span class="o">=</span> <span class="p">[</span><span class="bp">NSJSONSerialization</span> <span class="nl">dataWithJSONObject</span><span class="p">:</span><span class="n">jsonInfo</span> <span class="nl">options</span><span class="p">:</span><span class="n">NSJSONWritingPrettyPrinted</span> <span class="nl">error</span><span class="p">:</span><span class="o">&amp;</span><span class="n">error</span><span class="p">];</span>

        <span class="n">CDVPluginResult</span> <span class="o">*</span><span class="n">pluginResult</span> <span class="o">=</span> <span class="nb">nil</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>
            <span class="bp">NSString</span> <span class="o">*</span><span class="n">jsonString</span> <span class="o">=</span> <span class="p">[[</span><span class="bp">NSString</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithData</span><span class="p">:</span><span class="n">jsonData</span> <span class="nl">encoding</span><span class="p">:</span><span class="n">NSUTF8StringEncoding</span><span class="p">];</span>
            <span class="bp">NSString</span> <span class="o">*</span><span class="n">javaScriptString</span> <span class="o">=</span> <span class="p">[</span><span class="bp">NSString</span> <span class="nl">stringWithFormat</span><span class="p">:</span><span class="s">@&quot;print_message(%@)&quot;</span><span class="p">,</span> <span class="n">jsonString</span><span class="p">];</span>

<span class="c1">//            [self.webView stringByEvaluatingJavaScriptFromString:javaScriptString];</span>
            <span class="p">[</span><span class="nb">self</span><span class="p">.</span><span class="n">commandDelegate</span> <span class="nl">evalJs</span><span class="p">:</span><span class="n">javaScriptString</span><span class="p">];</span>

            <span class="n">pluginResult</span> <span class="o">=</span> <span class="p">[</span><span class="n">CDVPluginResult</span> <span class="nl">resultWithStatus</span><span class="p">:</span><span class="n">CDVCommandStatus_OK</span><span class="p">];</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="n">pluginResult</span> <span class="o">=</span> <span class="p">[</span><span class="n">CDVPluginResult</span> <span class="nl">resultWithStatus</span><span class="p">:</span><span class="n">CDVCommandStatus_ERROR</span> <span class="nl">messageAsString</span><span class="p">:[</span><span class="n">error</span> <span class="n">localizedDescription</span><span class="p">]];</span>
        <span class="p">}</span>

        <span class="p">[</span><span class="nb">self</span><span class="p">.</span><span class="n">commandDelegate</span> <span class="nl">sendPluginResult</span><span class="p">:</span><span class="n">pluginResult</span> <span class="nl">callbackId</span><span class="p">:</span><span class="n">command</span><span class="p">.</span><span class="n">callbackId</span><span class="p">];</span>
    <span class="p">}];</span>
<span class="p">}</span>
<span class="k">@end</span>
</code></pre></div>
<p>수정이 모두 마치면 다시 PhoneGap CLI로 build하고 install 한다.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">phonegap local build ios
</code></pre></div><div class="highlight"><pre><code class="language-text" data-lang="text">phonegap local install ios
</code></pre></div>
<p>실행 결과는 위와 동일하다는 것을 확인할 수 있다.</p>

<h2 id="다른-phonegap-프로젝트에서-사용할-수-있는-plugins-설명-만들기">다른 PhoneGap 프로젝트에서 사용할 수 있는 Plugins 설명 만들기</h2>

<p>이젠 이렇게 만든 플러그인에 다른 PhoneGap 프로젝트에 플러그인으로 설치를 해보자. Plugins을 만들기 위해서는 Plugins을 설명하는 파일이 필요한데 다음과 같다.</p>

<ol>
<li><strong>pacakge.json</strong> : Plugins을 설명하는 메타 파일이다.</li>
<li><strong>plugin.xml</strong> : PhoneGap 프로젝트에 Plugins 자원을 로드하기 위한 feature와 path를 설명하는 파일이다.</li>
<li><strong>export module</strong> : 마지막으로 PhoneGap 프로젝트에서 자동적으로 로드된 Plugins을 사용할 수 있도록 우리가 만든 js를 export하는 일이 필요하다.</li>
</ol>

<h3 id="package.json-생성">package.json 생성</h3>

<p>Plugins 에 관한 메타 정보를 입력하기 위해서 SF-PhoneGap-Plugin-Demo 프로젝트 디렉토리에 package.json을 다음 내용으로 생성한다.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">{
    &quot;version&quot;: &quot;0.0.1&quot;,
    &quot;name&quot;: &quot;net.saltfactory.tutorial.phonegap.plugindemo&quot;,
    &quot;cordova_name&quot;: &quot;SFPluginEcho&quot;,
    &quot;description&quot;: &quot;saltfactory&#39;s Echo Plugin&quot;
}
</code></pre></div>
<h3 id="plugin.xml-생성">plugin.xml 생성</h3>

<p>Plugins의 자원을 상세 설명하고 JavaScript 모듈과 연결시키는 역활을 하는 <code>plugin.xml</code>은 다음과 같이 설정하여 프로젝트 디렉토리에 생성한다. 여기서 중요한 것은 <code>js-module</code>의 <code>clobbers</code>인데 나중에 Plugins을 설치하고 PhoneGap 프로젝트에서 우리가 만든 모듈을 사용할 때 <code>sf_phonegap_plugin_demo_echo</code>라는 이름으로 사용하게 된다.</p>
<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>

<span class="nt">&lt;plugin</span> <span class="na">xmlns=</span><span class="s">&quot;http://apache.org/cordova/ns/plugins/1.0&quot;</span>
    <span class="na">xmlns:rim=</span><span class="s">&quot;http://www.blackberry.com/ns/widgets&quot;</span>
    <span class="na">xmlns:android=</span><span class="s">&quot;http://schemas.android.com/apk/res/android&quot;</span>
    <span class="na">id=</span><span class="s">&quot;net.saltfactory.tutorial.phonegap.plugindemo&quot;</span>
    <span class="na">version=</span><span class="s">&quot;0.0.1&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;name&gt;</span>SFPluginEcho<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;description&gt;</span>saltfactory&#39;s Echo Plugin Demo<span class="nt">&lt;/description&gt;</span>

    <span class="nt">&lt;js-module</span> <span class="na">src=</span><span class="s">&quot;www/js/sf_phonegap_plugin_demo_echo.js&quot;</span> <span class="na">name=</span><span class="s">&quot;sf_phonegap_plugin_demo_echo&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;clobbers</span> <span class="na">target=</span><span class="s">&quot;sf_phonegap_plugin_demo_echo&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/js-module&gt;</span>


    <span class="c">&lt;!-- ios --&gt;</span>
    <span class="nt">&lt;platform</span> <span class="na">name=</span><span class="s">&quot;ios&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;config-file</span> <span class="na">target=</span><span class="s">&quot;config.xml&quot;</span> <span class="na">parent=</span><span class="s">&quot;/*&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;feature</span> <span class="na">name=</span><span class="s">&quot;SFPluginEcho&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">&quot;ios-package&quot;</span> <span class="na">value=</span><span class="s">&quot;SFPluginEcho&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/feature&gt;</span>
        <span class="nt">&lt;/config-file&gt;</span>

        <span class="nt">&lt;header-file</span> <span class="na">src=</span><span class="s">&quot;platforms/ios/SF-PhoneGap-Plugin-Demo/Plugins/SFPluginEcho.h&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;source-file</span> <span class="na">src=</span><span class="s">&quot;platforms/ios/SF-PhoneGap-Plugin-Demo/Plugins/SFPluginEcho.m&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/platform&gt;</span>


<span class="nt">&lt;/plugin&gt;</span>
</code></pre></div>
<h3 id="javascript-모듈-export">JavaScript 모듈 export</h3>

<p>마지막으로 PhoneGap 프로젝트에서 Plugins 을 자동으로 등록하고 사용할 수 있게 JavaScript 모듈을 export한다. 우리는 <code>sf_plugin_demo_echo.js</code>라는 파일에 <code>SFPluginEcho</code> 를 만들었는데 이것을 export 한다. 다음과 같이 <code>sf_plugin_demo_echo.js</code>에 코드를 추가한다.</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">//</span>
<span class="c1">//  sf_phonegap_plugin_echo.js</span>
<span class="c1">//</span>
<span class="c1">//  Created by SungKwang Song on 3/12/14.</span>
<span class="c1">//</span>
<span class="c1">//</span>


<span class="kd">function</span> <span class="nx">SFPluginEcho</span><span class="p">()</span> <span class="p">{}</span>
<span class="nx">SFPluginEcho</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">echo</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span> <span class="p">{</span>

  <span class="nx">cordova</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="s2">&quot;SFPluginEcho&quot;</span><span class="p">,</span> <span class="s2">&quot;echo&quot;</span><span class="p">,</span> <span class="p">[</span><span class="nx">message</span><span class="p">]);</span>
<span class="p">};</span>


<span class="nx">SFPluginEcho</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getMessage</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="kd">var</span> <span class="nx">callbackSuccess</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">result</span><span class="p">){</span>
    <span class="nx">alert</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="kd">var</span> <span class="nx">callbackFail</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">){</span>
    <span class="nx">alert</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="nx">cordova</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">callbackSuccess</span><span class="p">,</span> <span class="nx">callbackFail</span><span class="p">,</span> <span class="s2">&quot;SFPluginEcho&quot;</span><span class="p">,</span> <span class="s2">&quot;getMessage&quot;</span><span class="p">,</span> <span class="p">[]);</span>

<span class="p">}</span>

<span class="nx">SFPluginEcho</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">runJavaScript</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="kd">var</span> <span class="nx">callbackFail</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">){</span>
    <span class="nx">alert</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="nx">cordova</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">callbackFail</span><span class="p">,</span> <span class="s2">&quot;SFPluginEcho&quot;</span><span class="p">,</span> <span class="s2">&quot;runJavasScriptFuncion&quot;</span><span class="p">,</span> <span class="p">[]);</span>

<span class="p">}</span>

<span class="kd">function</span> <span class="nx">print_message</span><span class="p">(</span><span class="nx">result</span><span class="p">){</span>
  <span class="nx">alert</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>
<span class="p">}</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SFPluginEcho</span><span class="p">();</span>
</code></pre></div>
<p>이제 다른 PhoneGap 프로젝트에서 우리가 만든 Plugins을 사용할 준비를 모두 마쳤다. 이제 다른 PhoneGap 프로젝트에서 우리가 만든 Plugins을 설치해보자.</p>

<h2 id="phonegap-프로젝트에-생성한-plugins을-설치하기">PhoneGap 프로젝트에 생성한 Plugins을 설치하기</h2>

<p>우리는 앞에서 <strong>SF-PhoneGap-Demo</strong> 프로젝트를 생성해보았다. 그 프로젝트 디렉토리에 들어가서 우리가 PhoneGap CLI로 Plugins를 설치하는 명령어에 생성한 SF-PhoneGap-Plugin-Demo를 설치하면 된다.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">cd ../SF-PhoneGap-Demo
</code></pre></div>
<p>먼저 Plugins의 목록을 살펴보자. 현재는 아무런 Plugins 가 설치 되어 있지 않다.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">phonegap plugin list
</code></pre></div>
<p><img src="http://cfile23.uf.tistory.com/image/22071B485326B09A281A99" alt="plugins list {max-width:600px;}"></p>

<p>이제 우리가 만든 Plugins을 설치 해보자.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">phonegap local plugin add ../sf-phonegap-plugin-demo
</code></pre></div>
<p><img src="http://cfile2.uf.tistory.com/image/22044F475326B1CA12AC08" alt="add plugin {max-width:600px;}"></p>

<p>Plugins 설치가 마치면 다시 PhoneGap 프로젝트의 Plugins의 목록을 살펴보자.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">phonegap plugin list
</code></pre></div>
<p><img src="http://cfile1.uf.tistory.com/image/264F5D3A5326B1F8044001" alt="plugins list {max-width:600px;}"></p>

<p>아무런 Plugins가 없었는데 설치후 우리가 생성한 <strong>net.saltfactory.tutorial.phonegap.plugindemo</strong> Plugins이 설치된 것을 확인할 수 있다.
<code>./plugins</code> 디렉토리 안을 살펴보자.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">ls -l ./plugins
</code></pre></div>
<p><img src="http://cfile25.uf.tistory.com/image/2163F1345326B34832093D" alt="plugins list {max-width:600px;}"></p>

<p>PhoneGap 프로젝트의 <code>./plugins</code> 디렉토리 안에는 우리가 Plugins으로 생성한 <strong>net.saltfactory.tutorial.phonegap.plugindemo</strong>가 설치된 것을 확인할 수 있다. 그리고 <code>ios.json</code> 파일을 열어보자. 아래와 같이 <code>config.xml</code>에 자동적으로 feature를 추가하는 정보가 들어가 있다.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">{
    &quot;prepare_queue&quot;: {
        &quot;installed&quot;: [],
        &quot;uninstalled&quot;: []
    },
    &quot;config_munge&quot;: {
        &quot;config.xml&quot;: {
            &quot;/*&quot;: {
                &quot;&lt;feature name=\&quot;SFPluginEcho\&quot;&gt;&lt;param name=\&quot;ios-package\&quot; value=\&quot;SFPluginEcho\&quot; /&gt;&lt;/feature&gt;&quot;: 1
            }
        }
    },
    &quot;installed_plugins&quot;: {
        &quot;net.saltfactory.tutorial.phonegap.plugindemo&quot;: {
            &quot;PACKAGE_NAME&quot;: &quot;net.saltfactory.tutorial.phonegapdemo&quot;
        }
    },
    &quot;dependent_plugins&quot;: {}
}
</code></pre></div>
<p>PhoneGap 프로젝트에서 Plugins으로 추가한 JavaScript 모듈은  <code>./platforms/ios/www/cordova_plugins.js</code> 에 설정이되어서 나중에 자동적으로 로드가 진행된다. 이 파일을 열어보자. 이 파일은 우리가 <code>plugin.xml</code>을 만든 내용을 바탕으로 만들어진다.</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">cordova</span><span class="p">.</span><span class="nx">define</span><span class="p">(</span><span class="s1">&#39;cordova/plugin_list&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">require</span><span class="p">,</span> <span class="nx">exports</span><span class="p">,</span> <span class="nx">module</span><span class="p">)</span> <span class="p">{</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s2">&quot;file&quot;</span><span class="o">:</span> <span class="s2">&quot;plugins/net.saltfactory.tutorial.phonegap.plugindemo/www/js/sf_phonegap_plugin_demo_echo.js&quot;</span><span class="p">,</span>
        <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;net.saltfactory.tutorial.phonegap.plugindemo.sf_phonegap_plugin_demo_echo&quot;</span><span class="p">,</span>
        <span class="s2">&quot;clobbers&quot;</span><span class="o">:</span> <span class="p">[</span>
            <span class="s2">&quot;sf_phonegap_plugin_demo_echo&quot;</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">];</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="p">.</span><span class="nx">metadata</span> <span class="o">=</span>
<span class="c1">// TOP OF METADATA</span>
<span class="p">{</span>
    <span class="s2">&quot;net.saltfactory.tutorial.phonegap.plugindemo&quot;</span><span class="o">:</span> <span class="s2">&quot;0.0.1&quot;</span>
<span class="p">}</span>
<span class="c1">// BOTTOM OF METADATA</span>
<span class="p">});</span>
</code></pre></div>
<p>이젠 PhoneGap 프로젝트에서 우리가 만든 Plugins을 사용해보자. <code>index.html</code>을 열어서 다음과 같이 수정한다. 우리는 <code>plugin.xm</code>에 <code>SFPluginEcho</code> 모듈을 <code>sf_phonegap_plugin_demo_echo</code>라고 사용할 것을 지정했다. 그래서 PhoneGap 프로젝트에서는 Plugins의 모듈을 로드한 뒤에는 앞으로 <code>sf_phonegap_plugin_demo_echo</code>라는 이름으로 사용해야한다. 그리고 우리가 Plugin을 만들 때 <code>runJavaScript()</code>는 네이티브코드에서 <code>print_message()</code>라는 JavaScript 함수를 호출하게 만들었기 때문에 <code>print_message()</code> 함수를 만들어줬다.</p>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="c">&lt;!--</span>
<span class="c">    Licensed to the Apache Software Foundation (ASF) under one</span>
<span class="c">    or more contributor license agreements.  See the NOTICE file</span>
<span class="c">    distributed with this work for additional information</span>
<span class="c">    regarding copyright ownership.  The ASF licenses this file</span>
<span class="c">    to you under the Apache License, Version 2.0 (the</span>
<span class="c">    &quot;License&quot;); you may not use this file except in compliance</span>
<span class="c">    with the License.  You may obtain a copy of the License at</span>

<span class="c">    http://www.apache.org/licenses/LICENSE-2.0</span>

<span class="c">    Unless required by applicable law or agreed to in writing,</span>
<span class="c">    software distributed under the License is distributed on an</span>
<span class="c">    &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY</span>
<span class="c">     KIND, either express or implied.  See the License for the</span>
<span class="c">    specific language governing permissions and limitations</span>
<span class="c">    under the License.</span>
<span class="c">--&gt;</span>
<span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">&quot;utf-8&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">&quot;format-detection&quot;</span> <span class="na">content=</span><span class="s">&quot;telephone=no&quot;</span> <span class="nt">/&gt;</span>
        <span class="c">&lt;!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 --&gt;</span>
        <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">&quot;viewport&quot;</span> <span class="na">content=</span><span class="s">&quot;user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span> <span class="na">href=</span><span class="s">&quot;css/index.css&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;title&gt;</span>Hello World<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;app&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;h1&gt;</span>PhoneGap<span class="nt">&lt;/h1&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;deviceready&quot;</span> <span class="na">class=</span><span class="s">&quot;blink&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">&quot;event listening&quot;</span><span class="nt">&gt;</span>Connecting to Device<span class="nt">&lt;/p&gt;</span>
                <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">&quot;event received&quot;</span><span class="nt">&gt;</span>Device is Ready<span class="nt">&lt;/p&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;phonegap.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
        <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;</span>

        <span class="kd">function</span> <span class="nx">print_message</span><span class="p">(</span><span class="nx">result</span><span class="p">){</span>
          <span class="nx">alert</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="kd">function</span> <span class="nx">runEcho</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">sf_phonegap_plugin_demo_echo</span><span class="p">.</span><span class="nx">runJavaScript</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;deviceready&#39;</span><span class="p">,</span> <span class="nx">runEcho</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>

        <span class="nt">&lt;/script&gt;</span>

    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div>
<p>이제 PhoneGap 프로젝트에서 우리가 만든 Plugins을 사용하는 모든 과정이 끝났다. 빌드하고 설치해보자.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">phonegap local build ios
</code></pre></div><div class="highlight"><pre><code class="language-text" data-lang="text">phonegap local install ios
</code></pre></div>
<p><img src="http://cfile9.uf.tistory.com/image/22066D405326B9171D9AD5" alt="ios simulator {max-width:320px;}"></p>

<p>실행 결과 정상적으로 우리가 만든 Plugins을 새로운 PhoneGap 프로젝트에 설치해서 적용하는 것을 확인했다.</p>

<h2 id="결론">결론</h2>

<p><strong>PhoneGap</strong>은 하이브리드 앱을 개발하는 플랫폼이고 PhoneGap에 여러가지 네이티브 자원을 웹에서 사요할 수 있는 Plugins을 제공하고 있다. 즉, 하이브리드 앱을 개발할기 위해서는 PhoneGap Plugins을 개발하는 방법을 반드시 알아야 한다. 웹과 네이티브 코드를 서로 연결하는 방법은 JavaScript에서 PhoneGap이 제공하고 있는 <code>cordova.exec()</code>를 실행해서 네이티브의 클래스 이릅과 메소드 이름을 호출할 수 있으며, 네이티브 코드에서는 JavaScript를 ios에서 제공하는 <code>[self.webView stringByEvaluatingJavaScriptFromString:]</code>를 이용해서 호출하거나 PhoneGap에서 제공하는 <code>[self.commandDelegate evalJs:]</code>를 이용해서 호출할 수 있다. 개발자가 직접 네이티브 코드를 작성해서 Plugin으로 설치할 수 있는데 이때 Plugins을 정의하는 <code>pacakge.json</code>, <code>plugin.xml</code>을 지정해줘야하고 PhoneGap 프로젝트에서 <code>js-module</code>을 사용할 수 있도록 우리가 만든 JavaScript 인터페이스를 module.exports를 해줘야 한다는 것을 확인했다. 이렇게 PhoneGap 프로젝트에서 하이브리드하게 JavaScript에서 네이티브코드를 접근하고, 네이티브코드에서 JavaScript를 접근하는 것을 PhoneGap을 통해서 처리할 수 있는 것을 확인했다. 앞으로 PhoneGap으로 하이브리드 앱을 개발하기 위해서는 Plugins을 개발해서 사용해야하는 것을 이해했고 PhoneGap 에서 제공하지 않는 다양한 네이티브코드와 자원을 사용할 수 있을 것으로 기대된다.</p>

<h2 id="참고">참고</h2>

<ol>
<li><a href="http://docs.phonegap.com/en/3.3.0/guide_hybrid_plugins_index.md.html">http://docs.phonegap.com/en/3.3.0/guide_hybrid_plugins_index.md.html</a></li>
<li><a href="http://docs.phonegap.com/en/3.3.0/guide_platforms_ios_plugin.md.html#iOS%20Plugins">http://docs.phonegap.com/en/3.3.0/guide_platforms_ios_plugin.md.html#iOS%20Plugins</a></li>
</ol>

<h2 id="연구원-소개">연구원 소개</h2>

<ul>
<li>작성자 : <a href="http://about.me/saltfactory">송성광</a> 개발 연구원</li>
<li>블로그 : <a href="http://blog.saltfactory.net">http://blog.saltfactory.net</a></li>
<li>이메일 : <a href="mailto:saltfactory@gmail.com">saltfactory@gmail.com</a></li>
<li>트위터 : <a href="https://twitter.com/saltfactory">@saltfactory</a></li>
<li>페이스북 : <a href="https://facebook.com/salthub">https://facebook.com/salthub</a></li>
<li>연구소 : <a href="http://www.hibrain.net">하이브레인넷</a> 부설연구소</li>
<li>연구실 : <a href="http://dblab.changwon.ac.kr">창원대학교 데이터베이스 연구실</a></li>
</ul>

  </article>

  
  
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    
      var disqus_shortname = 'saltfactorynet';
    
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

  
</div>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrap">

    <!-- <h2 class="footer-heading">saltfactory's series</h2> -->

    <div class="footer-col-1 column">
      <ul>
        <li><a href="http://saltfactory.net">www.saltfactory.net</a></li>
        <li><a href="http://blog.saltfactory.net">blog.saltfactory.net</a></li>
        <li><a href="mailto:saltfactory@gmail.com">saltfactory@gmail.com</a></li>
      </ul>
    </div>

    <div class="footer-col-2 column">
      <ul>
        <li>
          <a href="https://github.com/saltfactory">
            <span class="icon github">
              <svg version="1.1" class="github-icon-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
   viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve">
  <path fill-rule="evenodd" clip-rule="evenodd" fill="#C2C2C2" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761
  c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32
  c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472
  c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037
  C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65
  c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261
  c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082
  c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129
  c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
</svg>

            </span>
            <span class="username">saltfactory</span>
          </a>
        </li>

        <li>
          <a href="https://twitter.com/saltfactory">
            <span class="icon twitter">
              <svg version="1.1" class="twitter-icon-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
   viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve">
  <path fill="#C2C2C2" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809
  c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27
  c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767
  c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206
  C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271
  c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469
  c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/>
</svg>

            </span>
            <span class="username">saltfactory</span>
          </a>
        </li>

        <li>
          <a href="https://facebook.com/saltfactory">
            <span class="icon facebook">
          		<svg class="facebook-icon-svg" viewBox="0 0 60 60" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
    <path d="M0.112290344,30 C0.112290344,13.4314567 13.3426506,0 29.663129,0 C45.9836073,0 59.2139676,13.4314567 59.2139676,30 C59.2139676,46.5685433 45.9836073,60 29.663129,60 C13.3426506,60 0.112290344,46.5685433 0.112290344,30 Z M0.112290344,30" fill="#C2C2C2" sketch:type="MSShapeGroup"></path>
	<path d="M32.1341457,46.3196729 L32.1341457,29.9980891 L36.5657565,29.9980891 L37.1530406,24.3735809 L32.1341457,24.3735809 L32.141675,21.5584604 C32.141675,20.091502 32.2787707,19.3054722 34.351206,19.3054722 L37.1216686,19.3054722 L37.1216686,13.6803271 L32.6894304,13.6803271 C27.3655995,13.6803271 25.491749,16.4088187 25.491749,20.9972835 L25.491749,24.3742179 L22.1732173,24.3742179 L22.1732173,29.998726 L25.491749,29.998726 L25.491749,46.3196729 L32.1341457,46.3196729 Z M32.1341457,46.3196729" id="Path" fill="#FFFFFF" sketch:type="MSShapeGroup"></path>
</svg>
		
        	</span>
        	<span class="username">salthub</span>
			</a>
        </li>

      </ul>
    </div>

    <div class="footer-col-3 column">
      <p class="text"></p>
    </div>

  </div>

</footer>


	<script src="/series/assets/javascripts/jekyll-img-converter.js"></script>
    </body>
</html>
